'use strict';var CodeMirror=function(){function f(a,b){var c,d,e;function g(k){return 0<=k&&k<r.size}function l(k){for(var a=r;!a.lines;)for(var h=0;;++h){var b=a.children[h],c=b.chunkSize();if(k<c){a=b;break}k-=c}return a.lines[k]}function o(k,a){$=!0;for(var h=a-k.height,b=k;b;b=b.parent)b.height+=h}function j(k){var a={line:0,ch:0};da(a,{line:r.size-1,ch:l(r.size-1).text.length},Ea(k),a,a);ea=!0}function pa(k){var a=qa[M(k,"keyCode")],h=R[m.keyMap].auto,b,c;if(null==a||k.altGraphKey)return h&&
(m.keyMap=h.call?h.call(null,D):h),null;M(k,"altKey")&&(a="Alt-"+a);M(k,"ctrlKey")&&(a="Ctrl-"+a);M(k,"metaKey")&&(a="Cmd-"+a);M(k,"shiftKey")&&(b=z("Shift-"+a,m.extraKeys,m.keyMap))?c=!0:b=z(a,m.extraKeys,m.keyMap);"string"==typeof b&&(b=gb.propertyIsEnumerable(b)?gb[b]:null);if(a=h)if(!(a=b))a=qa[M(k,"keyCode")],a=!("Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a);a&&(m.keyMap=h.call?h.call(null,D):h);if(!b)return!1;h=S;try{m.readOnly&&(Ta=!0),c&&(S=null),b(D)}finally{S=h,Ta=!1}K(k);return!0}function ya(){if("nocursor"!=
m.readOnly){if(!T){if(m.onFocus)m.onFocus(D);T=!0;-1==E.className.search(/\bCodeMirror-focused\b/)&&(E.className+=" CodeMirror-focused");Fa||wa(!0)}Ua();Jb()}}function hb(){if(T){if(m.onBlur)m.onBlur(D);T=!1;fa&&s(function(){fa&&(fa(),fa=null)})();E.className=E.className.replace(" CodeMirror-focused","")}clearInterval(ib);setTimeout(function(){T||(S=null)},150)}function da(k,a,h,b,c){if(!Ta){if(U){var d=[];r.iter(k.line,a.line+1,function(k){d.push(k.text)});for(U.addChange(k.line,h.length,d);U.done.length>
m.undoDepth;)U.done.shift()}Kb(k,a,h,b,c)}}function Lb(k,a,h){for(var b=(k=k.pop())?k.length:0,c=[],d=0<h?0:b-1,b=0<h?b:-1;d!=b;d+=h){var e=k[d],g=[],G=e.start+e.added;r.iter(e.start,G,function(k){g.push(k.text)});c.push({start:e.start,added:e.old.length,old:g});var m=H({line:e.start+e.old.length-1,ch:oc(g[g.length-1],e.old[e.old.length-1])});Kb({line:e.start,ch:0},{line:G-1,ch:l(G-1).text.length},e.old,m,m)}ea=!0;a.push(c)}function Kb(k,a,h,b,nc){if(!Ta){var e=!1,g=ga.length;m.lineWrapping||r.iter(k.line,
a.line,function(k){if(k.text.length==g)return e=!0});if(k.line!=a.line||1<h.length)$=!0;var N=a.line-k.line,G=l(k.line),i=l(a.line);if(0==k.ch&&0==a.ch&&""==h[h.length-1]){var j=[],G=null;k.line?(G=l(k.line-1),G.fixMarkEnds(i)):i.fixMarkStarts();for(var f=0,n=h.length-1;f<n;++f)j.push(v.inheritMarks(h[f],G));N&&r.remove(k.line,N,Ga);j.length&&r.insert(k.line,j)}else if(G==i)if(1==h.length)G.replace(k.ch,a.ch,h[0]);else{i=G.split(a.ch,h[h.length-1]);G.replace(k.ch,null,h[0]);G.fixMarkEnds(i);j=[];
f=1;for(n=h.length-1;f<n;++f)j.push(v.inheritMarks(h[f],G));j.push(i);r.insert(k.line+1,j)}else if(1==h.length)G.replace(k.ch,null,h[0]),i.replace(null,a.ch,""),G.append(i),r.remove(k.line+1,N,Ga);else{j=[];G.replace(k.ch,null,h[0]);i.replace(null,a.ch,h[h.length-1]);G.fixMarkEnds(i);f=1;for(n=h.length-1;f<n;++f)j.push(v.inheritMarks(h[f],G));1<N&&r.remove(k.line+1,N-1,Ga);r.insert(k.line+1,j)}if(m.lineWrapping){var w=t.clientWidth/jb()-3;r.iter(k.line,k.line+h.length,function(k){if(!k.hidden){var a=
Math.ceil(k.text.length/w)||1;a!=k.height&&o(k,a)}})}else r.iter(k.line,f+h.length,function(k){k=k.text;k.length>g&&(ga=k,g=k.length,ha=null,e=!1)}),e&&(g=0,ga="",ha=null,r.iter(0,r.size,function(k){k=k.text;k.length>g&&(g=k.length,ga=k)}));i=[];N=h.length-N-1;f=0;for(j=X.length;f<j;++f)n=X[f],n<k.line?i.push(n):n>a.line&&i.push(n+N);f=k.line+Math.min(h.length,500);pc(k.line,f);i.push(f);X=i;kb(100);V.push({from:k.line,to:a.line+1,diff:N});k={from:k,to:a,text:h};if(Ha){for(h=Ha;h.next;h=h.next);h.next=
k}else Ha=k;Ia(b,nc,c.line<=Math.min(a.line,a.line+N)?c.line:c.line+N,d.line<=Math.min(a.line,a.line+N)?d.line:d.line+N);t.clientHeight&&(L.style.height=r.height*aa()+2*A.offsetTop+"px")}}function ba(k,a,h){function b(c){if(ca(c,a))return c;if(!ca(h,c))return e;var d=c.line+k.length-(h.line-a.line)-1,fb=c.ch;c.line==h.line&&(fb+=k[k.length-1].length-(h.ch-(h.line==a.line?a.ch:0)));return{line:d,ch:fb}}var a=H(a),h=h?H(h):a,k=Ea(k),e;Mb(k,a,h,function(k){e=k;return{from:b(c),to:b(d)}});return e}function za(k,
a){Mb(Ea(k),c,d,function(k){return"end"==a?{from:k,to:k}:"start"==a?{from:c,to:c}:{from:c,to:k}})}function Mb(k,a,h,b){b=b({line:a.line+k.length-1,ch:1==k.length?k[0].length+a.ch:k[k.length-1].length});da(a,h,k,b.from,b.to)}function Nb(k,a){var h=k.line,b=a.line;if(h==b)return l(h).text.slice(k.ch,a.ch);var c=[l(h).text.slice(k.ch)];r.iter(h+1,b,function(k){c.push(k.text)});c.push(l(b).text.slice(0,a.ch));return c.join("\n")}function Va(){return Nb(c,d)}function Ua(){lb||mb.set(m.pollInterval,function(){nb();
Ob();T&&Ua();ob()})}function Ja(){function k(){nb();!Ob()&&!a?(a=!0,mb.set(60,k)):(lb=!1,Ua());ob()}var a=!1;lb=!0;mb.set(20,k)}function Ob(){if(Fa||!T||qc(B)||m.readOnly)return!1;var k=B.value;if(k==ia)return!1;S=null;for(var a=0,h=Math.min(ia.length,k.length);a<h&&ia[a]==k[a];)++a;a<ia.length?c={line:c.line,ch:c.ch-(ia.length-a)}:pb&&I(c,d)&&(d={line:d.line,ch:Math.min(l(d.line).text.length,d.ch+(k.length-a))});za(k.slice(a),"end");ia=k;return!0}function wa(a){I(c,d)?a&&(ia=B.value=""):(ia="",B.value=
Va(),B.select())}function ra(){"nocursor"!=m.readOnly&&B.focus()}function Da(){if(Y.getBoundingClientRect){var a=Y.getBoundingClientRect();if(!(Ka&&a.top==a.bottom)){var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>a.top||a.bottom>b)&&Y.scrollIntoView()}}}function Ca(){var a=Aa(e?c:d),b=m.lineWrapping?Math.min(a.x,A.offsetWidth):a.x;return Pb(b,a.y,b,a.yBot)}function Pb(a,b,h,c){var d=A.offsetLeft,e=A.offsetTop,g=aa(),b=b+e,c=c+e,a=a+d,h=h+d,
l=t.clientHeight,i=t.scrollTop,d=!1,e=!0;b<i?(t.scrollTop=Math.max(0,b-2*g),d=!0):c>i+l&&(t.scrollTop=c+g-l,d=!0);b=t.clientWidth;c=t.scrollLeft;g=m.fixedGutter?O.clientWidth:0;a<c+g?(50>a&&(a=0),t.scrollLeft=Math.max(0,a-10-g),d=!0):h>b+c-3&&(t.scrollLeft=h+10-b,d=!0,h>L.clientWidth&&(e=!1));if(d&&m.onScroll)m.onScroll(D);return e}function Qb(){var a=aa(),b=t.scrollTop-A.offsetTop,h=Math.max(0,Math.floor(b/a)),a=Math.ceil((b+t.clientHeight)/a);return{from:i(r,h),to:i(r,a)}}function sa(a,b){if(t.clientWidth){var h=
Qb();if(!(!0!==a&&0==a.length&&h.from>J&&h.to<P)){var c=Math.max(h.from-100,0),h=Math.min(r.size,h.to+100);J<c&&20>c-J&&(c=J);P>h&&20>P-h&&(h=Math.min(r.size,P));for(var d=!0===a?[]:rc([{from:J,to:P,domStart:0}],a),e=0,g=0;g<d.length;++g){var l=d[g];l.from<c&&(l.domStart+=c-l.from,l.from=c);l.to>h&&(l.to=h);l.from>=l.to?d.splice(g--,1):e+=l.to-l.from}if(e!=h-c){d.sort(function(a,k){return a.domStart-k.domStart});var i=aa(),e=O.style.display;W.style.display="none";sc(c,h,d);W.style.display=O.style.display=
"";(g=c!=J||h!=P||Rb!=t.clientHeight+i)&&(Rb=t.clientHeight+i);J=c;P=h;La=ja(r,c);Wa.style.top=La*i+"px";t.clientHeight&&(L.style.height=r.height*i+2*A.offsetTop+"px");if(W.childNodes.length!=P-J)throw Error("BAD PATCH! "+JSON.stringify(d)+" size="+(P-J)+" nodes="+W.childNodes.length);if(m.lineWrapping){ha=t.clientWidth;var f=W.firstChild,j=!1;r.iter(J,P,function(a){if(!a.hidden){var k=Math.round(f.offsetHeight/i)||1;a.height!=k&&(o(a,k),$=j=!0)}f=f.nextSibling});j&&(L.style.height=r.height*i+2*A.offsetTop+
"px")}else null==ha&&(ha=qb(ga)),ha>t.clientWidth?(A.style.width=ha+"px",L.style.width="",L.style.width=t.scrollWidth+"px"):A.style.width=L.style.width="";O.style.display=e;(g||$)&&Sb();Tb();if(!b&&m.onUpdate)m.onUpdate(D);return!0}}}else J=P=La=0}function rc(a,b){for(var h=0,c=b.length||0;h<c;++h){for(var d=b[h],e=[],g=d.diff||0,l=0,i=a.length;l<i;++l){var m=a[l];d.to<=m.from&&d.diff?e.push({from:m.from+g,to:m.to+g,domStart:m.domStart}):d.to<=m.from||d.from>=m.to?e.push(m):(d.from>m.from&&e.push({from:m.from,
to:d.from,domStart:m.domStart}),d.to<m.to&&e.push({from:d.to+g,to:m.to+g,domStart:m.domStart+(d.to-m.from)}))}a=e}return a}function sc(a,b,h){if(h.length){for(var c=function(a){var k=a.nextSibling;a.parentNode.removeChild(a);return k},d=0,e=W.firstChild,g=0;g<h.length;++g){for(var l=h[g];l.domStart>d;)e=c(e),d++;for(var m=0,l=l.to-l.from;m<l;++m)e=e.nextSibling,d++}for(;e;)e=c(e)}else W.innerHTML="";var i=h.shift(),e=W.firstChild,m=a,f=ta.createElement("div");r.iter(a,b,function(a){i&&i.to==m&&(i=
h.shift());if(!i||i.from>m){if(a.hidden)var k=f.innerHTML="<pre></pre>";else k="<pre>"+a.getHTML(rb)+"</pre>",a.className&&(k='<div style="position: relative"><pre class="'+a.className+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+k+"</div>");f.innerHTML=k;W.insertBefore(f.firstChild,e)}else e=e.nextSibling;++m})}function Sb(){if(m.gutter||m.lineNumbers){var a=Wa.offsetHeight,b=t.clientHeight;O.style.height=(2>a-b?b:a)+"px";var h=[],c=J;r.iter(J,Math.max(P,
J+1),function(a){if(a.hidden)h.push("<pre></pre>");else{var k=a.gutterMarker,b=m.lineNumbers?c+m.firstLineNumber:null;k&&k.text?b=k.text.replace("%N%",null!=b?b:""):null==b&&(b="\u00a0");h.push(k&&k.style?'<pre class="'+k.style+'">':"<pre>",b);for(k=1;k<a.height;++k)h.push("<br/>&#160;");h.push("</pre>")}++c});O.style.display="none";Ma.innerHTML=h.join("");for(var a=(""+r.size).length,b=Ma.firstChild,d=b.textContent||b.innerText||b.nodeValue||"",e="";d.length+e.length<a;)e+="\u00a0";e&&b.insertBefore(ta.createTextNode(e),
b.firstChild);O.style.display="";A.style.marginLeft=O.offsetWidth+"px";$=!1}}function Tb(){var a=I(c,d),b=Aa(c,!0),h=a?b:Aa(d,!0),g=e?b:h,l=aa(),i=ua(E),f=ua(W);Na.style.top=Math.max(0,Math.min(t.offsetHeight,g.y+f.top-i.top))+"px";Na.style.left=Math.max(0,Math.min(t.offsetWidth,g.x+f.left-i.left))+"px";if(a)Y.style.top=g.y+"px",Y.style.left=(m.lineWrapping?Math.min(g.x,A.offsetWidth):g.x)+"px",Y.style.display="",Xa.style.display="none";else{var a=b.y==h.y,j="",g=function(a,k,b,h){j+='<div class="CodeMirror-selected" style="position: absolute; left: '+
a+"px; top: "+k+"px; right: "+b+"px; height: "+h+'px"></div>'};c.ch&&0<=b.y&&g(b.x,b.y,a?A.clientWidth-h.x:0,l);b=Math.max(0,b.y+(c.ch?l:0));i=Math.min(h.y,A.clientHeight)-b;i>0.2*l&&g(0,b,0,i);(!a||!c.ch)&&h.y<A.clientHeight-0.5*l&&g(0,h.y,A.clientWidth-h.x,l);Xa.innerHTML=j;Y.style.display="none";Xa.style.display=""}}function Ub(a){S=a?S||(e?d:c):null}function ka(a,b){var h=S&&H(S);h&&(ca(h,a)?a=h:ca(b,h)&&(b=h));Ia(a,b);Ya=!0}function Ia(a,b,h,g){Za=null;null==h&&(h=c.line,g=d.line);if(!I(c,a)||
!I(d,b)){if(ca(b,a))var l=b,b=a,a=l;a.line!=h&&(a=$a(a,h,c.ch));b.line!=g&&(b=$a(b,g,d.ch));I(a,b)?e=!1:I(a,d)?e=!1:I(b,c)&&(e=!0);c=a;d=b;la=!0}}function $a(a,b,h){function c(b){for(var d=a.line+b,e=1==b?r.size:-1;d!=e;){var xa=l(d);if(!xa.hidden){b=a.ch;if(b>h||b>xa.text.length)b=xa.text.length;return{line:d,ch:b}}d+=b}}return!l(a.line).hidden?a:a.line>=b?c(1)||c(-1):c(-1)||c(1)}function ma(a,b,h){a=H({line:a,ch:b||0});(h?ka:Ia)(a,a)}function ab(a){return Math.max(0,Math.min(a,r.size-1))}function H(a){if(0>
a.line)return{line:0,ch:0};if(a.line>=r.size)return{line:r.size-1,ch:l(r.size-1).text.length};var b=a.ch,h=l(a.line).text.length;return null==b||b>h?{line:a.line,ch:h}:0>b?{line:a.line,ch:0}:a}function sb(a,b){function h(b){if(m==(0>a?0:f.text.length)){if(b=!b)a:{for(var b=i+a,h=0>a?-1:r.size;b!=h;b+=a){var c=l(b);if(!c.hidden){i=b;f=c;b=!0;break a}}b=void 0}if(b)m=0>a?f.text.length:0;else return!1}else m+=a;return!0}var g=e?c:d,i=g.line,m=g.ch,f=l(i);if("char"==b)h();else if("column"==b)h(!0);else if("word"==
b)for(g=!1;!(0>a)||h();){if(tb(f.text.charAt(m)))g=!0;else if(g){0>a&&(a=1,h());break}if(0<a&&!h())break}return{line:i,ch:m}}function Vb(a){for(var b=l(a.line).text,h=a.ch,c=a.ch;0<h&&tb(b.charAt(h-1));)--h;for(;c<b.length&&tb(b.charAt(c));)++c;ka({line:a.line,ch:h},{line:a.line,ch:c})}function tc(a){ka({line:a,ch:0},{line:a,ch:l(a).text.length})}function bb(a,b){b||(b="add");if("smart"==b)if(F.indent)var h=cb(a);else b="prev";var e=l(a),g=e.indentation(m.tabSize),i=e.text.match(/^\s*/)[0],f;"prev"==
b?f=a?l(a-1).indentation(m.tabSize):0:"smart"==b?f=F.indent(h,e.text.slice(i.length),e.text):"add"==b?f=g+m.indentUnit:"subtract"==b&&(f=g-m.indentUnit);f=Math.max(0,f);if(f-g){g="";h=0;if(m.indentWithTabs)for(e=Math.floor(f/m.tabSize);e;--e)h+=m.tabSize,g+="\t";for(;h<f;)++h,g+=" "}else{if(c.line!=a&&d.line!=a)return;g=i}ba(g,{line:a,ch:0},{line:a,ch:i.length})}function Wb(){F=f.getMode(m,m.mode);r.iter(0,r.size,function(a){a.stateAfter=null});X=[0];kb()}function uc(){if(m.lineWrapping){E.className+=
" CodeMirror-wrap";var a=t.clientWidth/jb()-3;r.iter(0,r.size,function(b){if(!b.hidden){var h=Math.ceil(b.text.length/a)||1;1!=h&&o(b,h)}});A.style.width=L.style.width=""}else E.className=E.className.replace(" CodeMirror-wrap",""),ha=null,ga="",r.iter(0,r.size,function(a){1!=a.height&&!a.hidden&&o(a,1);a.text.length>ga.length&&(ga=a.text)});V.push({from:0,to:r.size})}function Xb(){for(var a='<span class="cm-tab">',b=0;b<m.tabSize;++b)a+=" ";return a+"</span>"}function vc(){rb=Xb();sa(!0)}function Yb(){t.className=
t.className.replace(/\s*cm-s-\w+/g,"")+m.theme.replace(/(^|\s)\s*/g," cm-s-")}function ub(){this.set=[]}function vb(a,b,h){function c(a,k,b,h){l(a).addMark(new y(k,b,h,d.set))}var a=H(a),b=H(b),d=new ub;if(a.line==b.line)c(a.line,a.ch,b.ch,h);else{c(a.line,a.ch,null,h);for(var e=a.line+1,g=b.line;e<g;++e)c(e,null,null,h);c(b.line,null,b.ch,h)}V.push({from:a.line,to:b.line+1});return d}function Zb(a,b){var h=a,c=a;"number"==typeof a?c=l(ab(a)):h=u(a);if(null!=h&&b(c,h))V.push({from:h,to:h+1});else return null;
return c}function $b(a,b){return Zb(a,function(a,k){if(a.hidden!=b){a.hidden=b;o(a,b?0:1);var e=c.line,g=d.line;if(b&&(e==k||g==k))e=e==k?$a({line:e,ch:0},e,0):c,g=g==k?$a({line:g,ch:0},g,0):d,Ia(e,g);return $=!0}})}function qb(a){na.innerHTML="<pre><span>x</span></pre>";na.firstChild.firstChild.firstChild.nodeValue=a;return na.firstChild.firstChild.offsetWidth||10}function ac(a,b){if(0==b)return{top:0,left:0};var c="";m.lineWrapping&&(c=a.text.indexOf(" ",b+2),c=Z(a.text.slice(b+1,0>c?a.text.length:
c+(Ka?5:0))));na.innerHTML="<pre>"+a.getHTML(rb,b)+'<span id="CodeMirror-temp-'+bc+'">'+Z(a.text.charAt(b)||" ")+"</span>"+c+"</pre>";var c=document.getElementById("CodeMirror-temp-"+bc),d=c.offsetTop,e=c.offsetLeft;Ka&&0==d&&0==e&&(d=document.createElement("span"),d.innerHTML="x",c.parentNode.insertBefore(d,c.nextSibling),d=d.offsetTop);return{top:d,left:e}}function Aa(a,b){var c,d=aa(),e=d*(ja(r,a.line)-(b?La:0));if(0==a.ch)c=0;else{var g=ac(l(a.line),a.ch);c=g.left;m.lineWrapping&&(e+=Math.max(0,
g.top))}return{x:c,y:e,yBot:e+d}}function wb(a,b){function c(a){a=ac(j,a);if(v){var b=Math.round(a.top/d);return Math.max(0,a.left+(b-n)*t.clientWidth)}return a.left}0>b&&(b=0);var d=aa(),e=jb(),g=La+Math.floor(b/d),f=i(r,g);if(f>=r.size)return{line:r.size-1,ch:l(r.size-1).text.length};var j=l(f),o=j.text,v=m.lineWrapping,n=v?g-ja(r,f):0;if(0>=a&&0==n)return{line:f,ch:0};for(var w=g=0,o=o.length,p,e=Math.min(o,Math.ceil((a+0.9*n*t.clientWidth)/e));;){var s=c(e);if(s<=a&&e<o)e=Math.min(o,Math.ceil(1.2*
e));else{p=s;o=e;break}}if(a>p)return{line:f,ch:o};e=Math.floor(0.8*o);s=c(e);s<a&&(g=e,w=s);for(;;){if(1>=o-g)return{line:f,ch:p-a>a-w?g:o};e=Math.ceil((g+o)/2);s=c(e);s>a?(o=e,p=s):(g=e,w=s)}}function cc(a){var a=Aa(a,!0),b=ua(A);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function aa(){if(null==va){va="<pre>";for(var a=0;49>a;++a)va+="x<br/>";va+="x</pre>"}a=W.clientHeight;if(a==dc)return xb;dc=a;na.innerHTML=va;xb=na.firstChild.offsetHeight/50||1;na.innerHTML="";return xb}function jb(){if(t.clientWidth==
ec)return fc;ec=t.clientWidth;return fc=qb("x")}function Ba(a,b){var c=ua(t,!0),d,e;try{d=a.clientX,e=a.clientY}catch(g){return null}if(!b&&(d-c.left>t.clientWidth||e-c.top>t.clientHeight))return null;c=ua(A,!0);return wb(d-c.left,e-c.top)}function gc(a){function b(){var a=Ea(B.value).join("\n");a!=g&&s(za)(a,"end");Na.style.position="relative";B.style.cssText=e;Fa=!1;wa(!0);Ua()}var h=Ba(a);if(h&&!window.opera){(I(c,d)||ca(h,c)||!ca(h,d))&&s(ma)(h.line,h.ch);var e=B.style.cssText;Na.style.position=
"absolute";B.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Fa=!0;var g=B.value=Va();ra();B.select();if(yb){Oa(a);var l=C(window,"mouseup",function(){l();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Jb(){clearInterval(ib);var a=!0;Y.style.visibility="";ib=setInterval(function(){Y.style.visibility=(a=!a)?
"":"hidden"},650)}function hc(a){function b(a,k,c){if(a.text)for(var h=a.styles,a=f?0:a.text.length-1,d,e=f?0:h.length-2,g=f?h.length:-2;e!=g;e+=2*j){var l=h[e];if(null!=h[e+1]&&h[e+1]!=w)a+=j*l.length;else for(var m=f?0:l.length-1,i=f?l.length:-1;m!=i;m+=j,a+=j)if(a>=k&&a<c&&t.test(d=l.charAt(m))){var xa=zb[d];if(">"==xa.charAt(1)==f)p.push(d);else{if(p.pop()!=xa.charAt(0))return{pos:a,match:!1};if(!p.length)return{pos:a,match:!0}}}}}var h=e?c:d,g=l(h.line),i=h.ch-1,m=0<=i&&zb[g.text.charAt(i)]||
zb[g.text.charAt(++i)];if(m){m.charAt(0);for(var f=">"==m.charAt(1),j=f?1:-1,o=g.styles,v=i+1,m=0,n=o.length;m<n;m+=2)if(0>=(v-=o[m].length)){var w=o[m+1];break}for(var p=[g.text.charAt(i)],t=/[(){}[\]]/,m=h.line,n=f?Math.min(m+100,r.size):Math.max(-1,m-100);m!=n;m+=j){var g=l(m),u=m==h.line;if(u=b(g,u&&f?i+1:0,u&&!f?i:g.text.length))break}u||(u={pos:null,match:!1});var w=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",Q=vb({line:h.line,ch:i},{line:h.line,ch:i+1},w),q=null!=u.pos&&
vb({line:m,ch:u.pos},{line:m,ch:u.pos+1},w),h=s(function(){Q.clear();q&&q.clear()});a?setTimeout(h,800):fa=h}}function ic(a){for(var b,c,d=a,a=a-40;d>a;--d){if(0==d)return 0;var e=l(d-1);if(e.stateAfter)return d;e=e.indentation(m.tabSize);if(null==c||b>e)c=d-1,b=e}return c}function cb(a){var b=ic(a),c=b&&l(b-1).stateAfter,c=c?q(F,c):n(F);r.iter(b,a,function(a){a.highlight(F,c,m.tabSize);a.stateAfter=q(F,c)});b<a&&V.push({from:b,to:a});a<r.size&&!l(a).stateAfter&&X.push(a);return c}function pc(a,b){var c=
cb(a);r.iter(a,b,function(a){a.highlight(F,c,m.tabSize);a.stateAfter=q(F,c)})}function wc(){for(var a=+new Date+m.workTime,b=X.length;X.length;){var c=l(J).stateAfter?X.pop():J;if(!(c>=r.size)){var d=ic(c),e=d&&l(d-1).stateAfter,e=e?q(F,e):n(F),g=0,i=F.compareStates,f=!1,j=d,o=!1;r.iter(j,r.size,function(b){var d=b.stateAfter;if(+new Date>a)return X.push(j),kb(m.workDelay),f&&V.push({from:c,to:j+1}),o=!0;var l=b.highlight(F,e,m.tabSize);l&&(f=!0);b.stateAfter=q(F,e);if(i){if(d&&i(d,e))return!0}else if(!1!==
l||!d)g=0;else if(3<++g&&(!F.indent||F.indent(d,"")==F.indent(e,"")))return!0;++j});if(o)return;f&&V.push({from:c,to:j+1})}}if(b&&m.onHighlightComplete)m.onHighlightComplete(D)}function kb(a){X.length&&xc.set(a,s(wc))}function nb(){ea=Ya=Ha=null;V=[];la=!1;Ga=[]}function ob(){var a=!1,b;la&&(a=!Ca());V.length?b=sa(V,!0):(la&&Tb(),$&&Sb());a&&Ca();la&&(Da(),Jb());T&&!Fa&&(!0===ea||!1!==ea&&la)&&wa(Ya);la&&m.matchBrackets&&setTimeout(s(function(){fa&&(fa(),fa=null);I(c,d)&&hc(!1)}),20);var h=Ha,a=Ga;
if(la&&m.onCursorActivity)m.onCursorActivity(D);if(h&&m.onChange&&D)m.onChange(D,h);for(h=0;h<a.length;++h)a[h](D);if(b&&m.onUpdate)m.onUpdate(D)}function s(a){return function(){jc++||nb();try{var b=a.apply(this,arguments)}finally{--jc||ob()}return b}}var m={},Ab=f.defaults,Pa;for(Pa in Ab)Ab.hasOwnProperty(Pa)&&(m[Pa]=(b&&b.hasOwnProperty(Pa)?b:Ab)[Pa]);var ta=m.document,E=ta.createElement("div");E.className="CodeMirror"+(m.lineWrapping?" CodeMirror-wrap":"");E.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden; outline: 5px auto none"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';
a.appendChild?a.appendChild(E):a(E);var Na=E.firstChild,B=Na.firstChild,t=E.lastChild,L=t.firstChild,Wa=L.firstChild,O=Wa.firstChild,Ma=O.firstChild,A=O.nextSibling.firstChild,na=A.firstChild,Y=na.nextSibling,Xa=Y.nextSibling,W=Xa.nextSibling;Yb();kc&&(B.style.width="0px");Bb||(A.draggable=!0);A.style.outline="none";null!=m.tabindex&&(B.tabIndex=m.tabindex);!m.gutter&&!m.lineNumbers&&(O.style.display="none");try{qb("x")}catch(Cb){throw Cb.message.match(/runtime/i)&&(Cb=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),
Cb;}var mb=new Db,xc=new Db,ib,F,r=new p([new w([new v("")])]),X,T;Wb();c={line:0,ch:0};d={line:0,ch:0};e=!1;var S,db,Qa,Eb=0,Fb,pb=!1,Ta=!1,ea,Ya,V,Ha,la,Fa,$,Ga,La=0,J=0,P=0,Rb=0,fa,ga="",ha,rb=Xb();s(function(){j(m.value||"");ea=!1})();var U=new Q;C(t,"mousedown",s(function(a){function b(a){var c=Ba(a,!0);if(c&&!I(c,g)){T||ya();g=c;ka(e,c);ea=!1;var k=Qb();if(c.line>=k.to||c.line<k.from)l=setTimeout(s(function(){b(a)}),150)}}Ub(M(a,"shiftKey"));for(var h=a.target||a.srcElement;h!=E;h=h.parentNode)if(h.parentNode==
L&&h!=Wa)return;for(h=a.target||a.srcElement;h!=E;h=h.parentNode)if(h.parentNode==Ma){if(m.onGutterClick)m.onGutterClick(D,Ra(Ma.childNodes,h)+J,a);return K(a)}var e=Ba(a);switch(yc(a)){case 3:yb&&!Gb&&gc(a);return;case 2:e&&ma(e.line,e.ch,!0);return}if(e){T||ya();h=+new Date;if(Qa&&Qa.time>h-400&&I(Qa.pos,e))return K(a),setTimeout(ra,20),tc(e.line);if(db&&db.time>h-400&&I(db.pos,e))return Qa={time:h,pos:e},K(a),Vb(e);db={time:h,pos:e};var g=e,l;if(lc&&!m.readOnly&&!I(c,d)&&!ca(e,c)&&!ca(d,e)){Bb&&
(A.draggable=!0);var i=C(ta,"mouseup",s(function(b){Bb&&(A.draggable=!1);Fb=!1;i();10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(K(b),ma(e.line,e.ch,!0),ra())}),!0);Fb=!0}else{K(a);ma(e.line,e.ch,!0);var f=C(ta,"mousemove",s(function(a){clearTimeout(l);K(a);b(a)}),!0),i=C(ta,"mouseup",s(function(a){clearTimeout(l);var b=Ba(a);b&&ka(e,b);K(a);ra();ea=!0;f();i()}),!0)}}else(a.target||a.srcElement)==t&&K(a)}));C(t,"dblclick",s(function(a){for(var b=a.target||a.srcElement;b!=E;b=b.parentNode)if(b.parentNode==
Ma)return K(a);if(b=Ba(a))Qa={time:+new Date,pos:b},K(a),Vb(b)}));C(A,"dragstart",function(a){var b=Va();Z(b);a.dataTransfer.setDragImage(oa,0,0);a.dataTransfer.setData("Text",b)});C(A,"selectstart",K);yb||C(t,"contextmenu",gc);C(t,"scroll",function(){Eb=t.scrollTop;sa([]);m.fixedGutter&&(O.style.left=t.scrollLeft+"px");if(m.onScroll)m.onScroll(D)});C(window,"resize",function(){sa(!0)});C(B,"keyup",s(function(a){if(!m.onKeyEvent||!m.onKeyEvent(D,Hb(a)))16==M(a,"keyCode")&&(S=null)}));C(B,"input",
Ja);C(B,"keydown",s(function(a){T||ya();Ka&&27==a.keyCode&&(a.returnValue=!1);if(!m.onKeyEvent||!m.onKeyEvent(D,Hb(a))){var b=M(a,"keyCode");Ub(16==b||M(a,"shiftKey"));var c=pa(a);window.opera&&(Ib=c?b:null,!c&&88==b&&M(a,Gb?"metaKey":"ctrlKey")&&za(""))}}));C(B,"keypress",s(function(a){var b=M(a,"keyCode"),c=M(a,"charCode");window.opera&&b==Ib?(Ib=null,K(a)):m.onKeyEvent&&m.onKeyEvent(D,Hb(a))||window.opera&&!a.which&&pa(a)||(m.electricChars&&F.electricChars&&m.smartIndent&&!m.readOnly&&(a=String.fromCharCode(null==
c?b:c),-1<F.electricChars.indexOf(a)&&setTimeout(s(function(){bb(d.line,"smart")}),75)),Ja())}));C(B,"focus",ya);C(B,"blur",hb);C(t,"dragenter",Oa);C(t,"dragover",Oa);C(t,"drop",s(function(a){a.preventDefault();var b=Ba(a,!0),e=a.dataTransfer.files;if(b&&!m.readOnly)if(e&&e.length&&window.FileReader&&window.File)for(var a=function(a,c){var k=new FileReader;k.onload=function(){l[c]=k.result;++i==g&&(b=H(b),s(function(){var a=ba(l.join(""),b,b);ka(b,a)})())};k.readAsText(a)},g=e.length,l=Array(g),i=
0,f=0;f<g;++f)a(e[f],f);else try{if(l=a.dataTransfer.getData("Text"))e=c,a=d,ka(b,b),Fb&&ba("",e,a),za(l),ra()}catch(j){}}));C(t,"paste",function(){ra();Ja()});C(B,"paste",Ja);C(B,"cut",s(function(){m.readOnly||za("")}));var mc;try{mc=ta.activeElement==B}catch(zc){}mc?setTimeout(ya,20):hb();var D=E.CodeMirror={getValue:function(){var a=[];r.iter(0,r.size,function(b){a.push(b.text)});return a.join("\n")},setValue:s(j),getSelection:Va,replaceSelection:s(za),focus:function(){ra();ya();Ja()},setOption:function(a,
b){var c=m[a];m[a]=b;"mode"==a||"indentUnit"==a?Wb():"readOnly"==a&&"nocursor"==b?(hb(),B.blur()):"readOnly"==a&&!b?wa(!0):"theme"==a?Yb():"lineWrapping"==a&&c!=b?s(uc)():"tabSize"==a&&s(vc)();("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a)&&sa(!0)},getOption:function(a){return m[a]},undo:s(function(){Lb(U.done,U.undone,-1)}),redo:s(function(){Lb(U.undone,U.done,1)}),indentLine:s(function(a,b){"string"!=typeof b&&(b=null==b?m.smartIndent?"smart":"prev":b?"add":"subtract");g(a)&&
bb(a,b)}),indentSelection:s(function(a){if(I(c,d))return bb(c.line,a);for(var b=d.line-(d.ch?0:1),e=c.line;e<=b;++e)bb(e,a)}),historySize:function(){return{undo:U.done.length,redo:U.undone.length}},clearHistory:function(){U=new Q},matchBrackets:s(function(){hc(!0)}),getTokenAt:s(function(a){a=H(a);return l(a.line).getTokenAt(F,cb(a.line),a.ch)}),getStateAfter:function(a){a=ab(null==a?r.size-1:a);return cb(a+1)},cursorCoords:function(a){null==a&&(a=e);return cc(a?c:d)},charCoords:function(a){return cc(H(a))},
coordsChar:function(a){var b=ua(A);return wb(a.x-b.left,a.y-b.top)},markText:s(vb),setBookmark:function(a){var a=H(a),b=new x(a.ch);l(a.line).addMark(b);return b},setMarker:s(function(a,b,c){"number"==typeof a&&(a=l(ab(a)));a.gutterMarker={text:b,style:c};$=!0;return a}),clearMarker:s(function(a){"number"==typeof a&&(a=l(ab(a)));a.gutterMarker=null;$=!0}),setLineClass:s(function(a,b){return Zb(a,function(a){if(a.className!=b)return a.className=b,!0})}),hideLine:s(function(a){return $b(a,!0)}),showLine:s(function(a){return $b(a,
!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!g(a))return null;a=l(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!g(a))return null;var b=a,a=l(a);if(!a)return null}else if(b=u(a),null==b)return null;var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className}},addWidget:function(a,b,c,d,e){var a=Aa(H(a)),g=a.yBot,l=a.x;b.style.position="absolute";L.appendChild(b);if("over"==
d)g=a.y;else if("near"==d){var d=Math.max(t.offsetHeight,r.height*aa()),i=Math.max(L.clientWidth,A.clientWidth)-A.offsetLeft;a.yBot+b.offsetHeight>d&&a.y>b.offsetHeight&&(g=a.y-b.offsetHeight);l+b.offsetWidth>i&&(l=i-b.offsetWidth)}b.style.top=g+A.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(l=L.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?l=0:"middle"==e&&(l=(L.clientWidth-b.offsetWidth)/2),b.style.left=l+A.offsetLeft+"px");c&&Pb(l,g,l+b.offsetWidth,g+b.offsetHeight)},lineCount:function(){return r.size},
clipPos:H,getCursor:function(a){null==a&&(a=e);return{line:(a?c:d).line,ch:(a?c:d).ch}},somethingSelected:function(){return!I(c,d)},setCursor:s(function(a,b,c){null==b&&"number"==typeof a.line?ma(a.line,a.ch,c):ma(a,b,c)}),setSelection:s(function(a,b,c){(c?ka:Ia)(H(a),H(b||a))}),getLine:function(a){if(g(a))return l(a).text},getLineHandle:function(a){if(g(a))return l(a)},setLine:s(function(a,b){g(a)&&ba(b,{line:a,ch:0},{line:a,ch:l(a).text.length})}),removeLine:s(function(a){g(a)&&ba("",{line:a,ch:0},
H({line:a+1,ch:0}))}),replaceRange:s(ba),getRange:function(a,b){return Nb(H(a),H(b))},execCommand:function(a){return gb[a](D)},moveH:s(function(a,b){var e=0>a?c:d;if(S||I(c,d))e=sb(a,b);ma(e.line,e.ch,!0)}),deleteH:s(function(a,b){I(c,d)?0>a?ba("",sb(a,b),d):ba("",c,sb(a,b)):ba("",c,d);Ya=!0}),moveV:s(function(a,b){var h=0,g=Aa(e?c:d,!0);null!=Za&&(g.x=Za);"page"==b?h=Math.min(t.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==b&&(h=aa());h=wb(g.x,g.y+h*a+2);ma(h.line,
h.ch,!0);Za=g.x}),toggleOverwrite:function(){pb=!pb},posFromIndex:function(a){var b=0,c;r.iter(0,r.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return H({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;r.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(t.scrollTop=a);null!=b&&(t.scrollLeft=b);sa([])},operation:function(a){return s(a)()},refresh:function(){sa(!0);t.scrollHeight>Eb&&(t.scrollTop=Eb)},getInputField:function(){return B},
getWrapperElement:function(){return E},getScrollerElement:function(){return t},getGutterElement:function(){return O}},Ib=null,lb=!1,ia="",Za=null;ub.prototype.clear=s(function(){for(var a=Infinity,b=-Infinity,c=0,d=this.set.length;c<d;++c){var e=this.set[c],g=e.marked;if(g&&e.parent){e=u(e);a=Math.min(a,e);b=Math.max(b,e);for(e=0;e<g.length;++e)g[e].set==this.set&&g.splice(e--,1)}}Infinity!=a&&V.push({from:a,to:b+1})});ub.prototype.find=function(){for(var a,b,c=0,e=this.set.length;c<e;++c)for(var d=
this.set[c],g=d.marked,l=0;l<g.length;++l){var i=g[l];if(i.set==this.set&&(null!=i.from||null!=i.to)){var m=u(d);null!=m&&(null!=i.from&&(a={line:m,ch:i.from}),null!=i.to&&(b={line:m,ch:i.to}))}}return{from:a,to:b}};var bc=Math.floor(16777215*Math.random()).toString(16),xb,dc,va,fc,ec=0,zb={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},jc=0,Sa;for(Sa in eb)eb.propertyIsEnumerable(Sa)&&!D.propertyIsEnumerable(Sa)&&(D[Sa]=eb[Sa]);return D}function z(a,b,c){function d(a,b,c){var i=b[a];if(null!=
i)return i;null==c&&(c=b.fallthrough);if(null==c)return b.catchall;if("string"==typeof c)return d(a,R[c]);for(var b=0,f=c.length;b<f;++b)if(i=d(a,R[c[b]]),null!=i)return i;return null}return b?d(a,b,c):d(a,R[c])}function q(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function n(a,b,c){return a.startState?a.startState(b,c):!0}function j(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function y(a,
b,c,d){this.from=a;this.to=b;this.style=c;this.set=d}function x(a){this.to=this.from=a;this.line=null}function v(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.stateAfter=this.parent=this.hidden=this.marked=this.gutterMarker=this.className=this.handlers=null}function o(a,b,c,d){for(var e=0,g=0,l=0;g<b;e+=2){var i=c[e],f=g+i.length;0==l?(f>a&&d.push(i.slice(a-g,Math.min(i.length,b-g)),c[e+1]),f>=a&&(l=1)):1==l&&(f>b?d.push(i.slice(0,b-g),c[e+1]):d.push(i,c[e+1]));g=f}}function w(a){this.lines=
a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function p(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var g=a[d],b=b+g.chunkSize(),c=c+g.height;g.parent=this}this.size=b;this.height=c;this.parent=null}function u(a){if(null==a.parent)return null;for(var b=a.parent,a=Ra(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;!(c.children[d]==b);++d)a+=c.children[d].chunkSize();return a}function i(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<
e;++d){var g=a.children[d],l=g.height;if(b<l){a=g;continue a}b-=l;c+=g.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){g=a.lines[d].height;if(b<g)break;b-=g}return c+d}function ja(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var g=a.children[d],l=g.chunkSize();if(b<l){a=g;continue a}b-=l;c+=g.height}return c}while(!a.lines);for(d=0;d<b;++d)c+=a.lines[d].height;return c}function Q(){this.time=0;this.done=[];this.undone=[]}function pa(){Oa(this)}function Hb(a){a.stop||
(a.stop=pa);return a}function K(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function wa(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Oa(a){K(a);wa(a)}function yc(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function M(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function C(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,
c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function Db(){this.id=null}function Ca(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function ua(a,b){for(var c=a.ownerDocument.body,d=0,e=0,g=!1,l=a;l;l=l.offsetParent){var i=l.offsetLeft,f=l.offsetTop;l==c?(d+=Math.abs(i),e+=Math.abs(f)):(d+=i,e+=f);b&&"fixed"==(l.currentStyle?l.currentStyle:window.getComputedStyle(l,
null)).position&&(g=!0)}c=b&&!g?null:c;for(l=a.parentNode;l!=c;l=l.parentNode)null!=l.scrollLeft&&(d-=l.scrollLeft,e-=l.scrollTop);return{left:d,top:e}}function I(a,b){return a.line==b.line&&a.ch==b.ch}function ca(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Z(a){oa.textContent=a;return oa.innerHTML}function oc(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;0<=c&&0<=d&&!(a.charAt(c)!=b.charAt(d));--c,--d);return d+1}function Ra(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function tb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}f.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,
onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var kc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Gb=kc||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var Da={},da={};f.defineMode=function(a,b){!f.defaults.mode&&"null"!=a&&(f.defaults.mode=a);Da[a]=b};f.defineMIME=function(a,b){da[a]=b};f.getMode=function(a,b){"string"==typeof b&&da.hasOwnProperty(b)&&(b=da[b]);if("string"==
typeof b)var c=b,d={};else null!=b&&(c=b.name,d=b);var e=Da[c];return!e?(window.console&&console.warn("No mode "+c+" found, falling back to plain text."),f.getMode(a,"text/plain")):e(a,d||{})};f.listModes=function(){var a=[],b;for(b in Da)Da.propertyIsEnumerable(b)&&a.push(b);return a};f.listMIMEs=function(){var a=[],b;for(b in da)da.propertyIsEnumerable(b)&&a.push({mime:b,mode:da[b]});return a};var eb=f.extensions={};f.defineExtension=function(a,b){eb[a]=b};var gb=f.commands={selectAll:function(a){a.setSelection({line:0,
ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!I(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,
0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t",
"end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},R=f.keyMap={};R.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",
Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};R.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight",
"Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};R.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight",
"Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};R["default"]=Gb?R.macDefault:R.pcDefault;R.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight",
"Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};f.fromTextArea=function(a,b){function c(){a.value=l.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(a.form){var d=C(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var e=a.form.submit,g=function(){c();a.form.submit=e;a.form.submit();a.form.submit=g};a.form.submit=g}}a.style.display="none";var l=f(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);l.save=c;l.getTextArea=
function(){return a};l.toTextArea=function(){c();a.parentNode.removeChild(l.getWrapperElement());a.style.display="";a.form&&(d(),"function"==typeof a.form.submit&&(a.form.submit=e))};return l};f.copyState=q;f.startState=n;j.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return Ca(this.string,this.start,this.tabSize)},indentation:function(){return Ca(this.string,
null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&!1!==b)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,this.pos)}};f.StringStream=j;y.prototype={attach:function(a){this.set.push(a)},detach:function(a){a=Ra(this.set,a);-1<a&&this.set.splice(a,1)},split:function(a,
b){return this.to<=a&&null!=this.to?null:new y(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.set)},dup:function(){return new y(null,null,this.style,this.set)},clipTo:function(a,b,c,d,e){null!=this.from&&this.from>=b&&(this.from=Math.max(d,this.from)+e);null!=this.to&&this.to>b&&(this.to=d<this.to?this.to+e:b);if(a&&d>this.from&&(d<this.to||null==this.to))this.from=null;if(c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from))this.to=null},isDead:function(){return null!=
this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.set==a.set}};x.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,e){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+e)},sameSet:function(){return!1},find:function(){return!this.line||
!this.line.parent?null:{line:u(this.line),ch:this.from}},clear:function(){if(this.line){var a=Ra(this.line.marked,this);-1!=a&&this.line.marked.splice(a,1);this.line=null}}};v.inheritMarks=function(a,b){var c=new v(a),d=b&&b.marked;if(d)for(var e=0;e<d.length;++e)if(null==d[e].to&&d[e].style){var g=c.marked||(c.marked=[]),l=d[e].dup();g.push(l);l.attach(c)}return c};v.prototype={replace:function(a,b,c){var d=[],e=this.marked,g=null==b?this.text.length:b;o(0,a,this.styles,d);c&&d.push(c,null);o(g,
this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(g);this.stateAfter=null;if(e){c=c.length-(g-a);for(d=0;d<e.length;++d){var l=e[d];l.clipTo(null==a,a||0,null==b,g,c);l.isDead()&&(l.detach(this),e.splice(d--,1))}}},split:function(a,b){var c=[b,null],d=this.marked;o(a,this.text.length,this.styles,c);c=new v(b+this.text.slice(a),c);if(d)for(var e=0;e<d.length;++e){var g=d[e].split(a,b.length);g&&(c.marked||(c.marked=[]),c.marked.push(g),g.attach(c))}return c},
append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;o(0,a.text.length,a.styles,this.styles);if(d)for(a=0;a<d.length;++a)null==d[a].to&&(d[a].to=b);if(c&&c.length){d||(this.marked=d=[]);a=0;a:for(;a<c.length;++a){var e=c[a];if(!e.from)for(var g=0;g<d.length;++g){var l=d[g];if(l.to==b&&l.sameSet(e)){l.to=null==e.to?null:e.to+b;l.isDead()&&(l.detach(this),c.splice(a--,1));continue a}}d.push(e);e.attach(this);e.from+=b;null!=e.to&&(e.to+=b)}}},fixMarkEnds:function(a){var b=
this.marked,a=a.marked;if(b)for(var c=0;c<b.length;++c){var d=b[c],e=null==d.to;if(e&&a)for(var g=0;g<a.length;++g)if(a[g].sameSet(d)){e=!1;break}e&&(d.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){var c=new j(this.text,c),d=this.styles,
e=0,g=!1,l=d[0],i;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var f=a.token(c,b),o=this.text.slice(c.start,c.pos);c.start=c.pos;if(e&&d[e-1]==f)d[e-2]+=o;else if(o){if(!g&&(d[e+1]!=f||e&&d[e-2]!=i))g=!0;d[e++]=o;d[e++]=f;i=l;l=d[e]}if(5E3<c.pos){d[e++]=this.text.slice(c.pos);d[e++]=null;break}}d.length!=e&&(d.length=e,g=!0);e&&d[e-2]!=i&&(g=!0);return g||(5>d.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c){for(var d=new j(this.text);d.pos<c&&!d.eol();){d.start=d.pos;
var e=a.token(d,b)}return{start:d.start,end:d.pos,string:d.current(),className:e||null,state:b}},indentation:function(a){return Ca(this.text,null,a)},getHTML:function(a,b){function c(b,c){b&&(g&&Ka&&" "==b.charAt(0)&&(b="\u00a0"+b.slice(1)),g=!1,c?e.push('<span class="',c,'">',Z(b).replace(/\t/g,a),"</span>"):e.push(Z(b).replace(/\t/g,a)))}function d(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var e=[],g=!0,l=this.styles,i=this.text,f=this.marked,j=i.length;null!=b&&(j=Math.min(b,j));if(!i&&null==
b)c(" ");else if(!f||!f.length)for(var o=i=0;o<j;i+=2){var n=l[i],v=l[i+1],w=n.length;o+w>j&&(n=n.slice(0,j-o));o+=w;c(n,d(v))}else for(var p=0,i=0,o="",u=f[0].from||0,Q=[],q=0,n=function(){for(var a;q<f.length&&((a=f[q]).from==p||null==a.from);)null!=a.style&&Q.push(a),++q;u=q<f.length?f[q].from:Infinity;for(a=0;a<Q.length;++a){var b=Q[a].to||Infinity;b==p?Q.splice(a--,1):u=Math.min(b,u)}};p<j;){u==p&&n();for(w=Math.min(j,u);;){if(o){for(var x=p+o.length,ja=v,pa=0;pa<Q.length;++pa)ja=(ja?ja+" ":
"")+Q[pa].style;c(x>w?o.slice(0,w-p):o,ja);if(x>=w){o=o.slice(w-p);p=w;break}p=x}o=l[i++];v=d(l[i++])}}return e.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};w.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var g=this.lines[d];this.height-=g.height;g.cleanUp();if(g.handlers)for(var i=0;i<g.handlers.length;++i)c.push(g.handlers[i])}this.lines.splice(a,b)},
collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines.splice.apply(this.lines,[a,0].concat(b));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};p.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(a<g){var i=Math.min(b,g-a),f=e.height;e.remove(a,
i,c);this.height-=f-e.height;g==i&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=i))break;a=0}else a-=g}25>this.size-b&&(a=[],this.collapse(a),this.children=[new w(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var g=
this.children[d],i=g.chunkSize();if(a<=i){g.insertHeight(a,b,c);if(g.lines&&50<g.lines.length){for(;50<g.lines.length;)a=g.lines.splice(g.lines.length-25,25),a=new w(a),g.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=i}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new p(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Ra(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=
new p(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var g=this.children[d],i=g.chunkSize();if(a<i){i=Math.min(b,i-a);if(g.iterN(a,i,c))return!0;if(0==(b-=i))break;a=0}else a-=i}}};Q.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=this.done[this.done.length-1],g=e&&e[e.length-1];if(400<d-this.time||
!g)this.done.push([{start:a,added:b,old:c}]);else if(g.start>a+b||g.start+g.added<a-g.added+g.old.length)e.push({start:a,added:b,old:c});else{var i=0;if(a<g.start){for(e=g.start-a-1;0<=e;--e)g.old.unshift(c[e]);g.added+=g.start-a;g.start=a}else g.start<a&&(i=a-g.start,b+=i);e=g.added-i;for(a=c.length;e<a;++e)g.old.push(c[e]);g.added<b&&(g.added=b)}this.time=d}};f.e_stop=Oa;f.e_preventDefault=K;f.e_stopPropagation=wa;f.connect=C;Db.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,
a)}};var lc;lc=/MSIE [1-8]\b/.test(navigator.userAgent)?!1:"draggable"in document.createElement("div");var yb=/gecko\/\d{7}/i.test(navigator.userAgent),Ka=/MSIE \d/.test(navigator.userAgent),Bb=/WebKit\//.test(navigator.userAgent);(function(){var a=document.createElement("textarea");a.value="foo\nbar";a.value.indexOf("\r")})();null!=document.documentElement.getBoundingClientRect&&(ua=function(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==
window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body);c.top+=e.scrollTop;c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var oa=document.createElement("pre");"\na"==Z("a")?Z=function(a){oa.textContent=a;return oa.innerHTML.slice(1)}:"\t"!=Z("\t")&&(Z=function(a){oa.innerHTML="";oa.appendChild(document.createTextNode(a));return oa.innerHTML});f.htmlEscape=Z;var Ea=3!="\n\nb".split(/\n/).length?function(a){for(var b=
0,c,d=[];-1<(c=a.indexOf("\n",b));)d.push(a.slice(b,"\r"==a.charAt(c-1)?c-1:c)),b=c+1;d.push(a.slice(b));return d}:function(a){return a.split(/\r?\n/)};f.splitLines=Ea;var qc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};f.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});f.defineMIME("text/plain",
"null");var qa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",
63272:"Delete"};f.keyNames=qa;(function(){for(var a=0;10>a;a++)qa[a+48]=""+a;for(a=65;90>=a;a++)qa[a]=String.fromCharCode(a);for(a=1;12>=a;a++)qa[a+111]=qa[a+63235]="F"+a})();return f}();(function(){function f(f,q){var n=f.getWrapperElement(),n=n.insertBefore(document.createElement("div"),n.firstChild);n.className="CodeMirror-dialog";n.innerHTML="<div>"+q+"</div>";return n}CodeMirror.defineExtension("openDialog",function(z,q){function n(){y||(y=!0,j.parentNode.removeChild(j))}var j=f(this,z),y=!1,x=this,v=j.getElementsByTagName("input")[0];v&&(CodeMirror.connect(v,"keydown",function(f){if(13==f.keyCode||27==f.keyCode)CodeMirror.e_stop(f),n(),x.focus(),13==f.keyCode&&q(v.value)}),
v.focus(),CodeMirror.connect(v,"blur",n));return n});CodeMirror.defineExtension("openConfirm",function(z,q){function n(){x||(x=!0,j.parentNode.removeChild(j),v.focus())}var j=f(this,z),y=j.getElementsByTagName("button"),x=!1,v=this,o=1;y[0].focus();for(var w=0;w<y.length;++w){var p=y[w];(function(f){CodeMirror.connect(p,"click",function(i){CodeMirror.e_preventDefault(i);n();f&&f(v)})})(q[w]);CodeMirror.connect(p,"blur",function(){--o;setTimeout(function(){0>=o&&n()},200)});CodeMirror.connect(p,"focus",
function(){++o})}})})();(function(){function f(f,q,n,j){this.atOccurrence=!1;this.cm=f;null==j&&(j="string"==typeof q&&q==q.toLowerCase());n=n?f.clipPos(n):{line:0,ch:0};this.pos={from:n,to:n};if("string"!=typeof q)this.matches=function(j,o){if(j)for(var n=f.getLine(o.line).slice(0,o.ch),p=n.match(q),u=0;p;){var i=n.indexOf(p[0]),u=u+i,n=n.slice(i+1);if(i=n.match(q))p=i;else break;u++}else n=f.getLine(o.line).slice(o.ch),u=(p=n.match(q))&&o.ch+n.indexOf(p[0]);if(p)return{from:{line:o.line,ch:u},to:{line:o.line,ch:u+p[0].length},
match:p}};else{j&&(q=q.toLowerCase());var y=j?function(f){return f.toLowerCase()}:function(f){return f},x=q.split("\n");this.matches=1==x.length?function(j,o){var n=y(f.getLine(o.line)),p=q.length,u;if(j?o.ch>=p&&-1!=(u=n.lastIndexOf(q,o.ch-p)):-1!=(u=n.indexOf(q,o.ch)))return{from:{line:o.line,ch:u},to:{line:o.line,ch:u+p}}}:function(j,o){var n=o.line,p=j?x.length-1:0,u=x[p],i=y(f.getLine(n)),q=j?i.indexOf(u)+u.length:i.lastIndexOf(u);if(!(j?q>=o.ch||q!=u.length:q<=o.ch||q!=i.length-u.length))for(;!(j?
!n:n==f.lineCount()-1);){i=y(f.getLine(n+=j?-1:1));u=x[j?--p:++p];if(0<p&&p<x.length-1)if(i!=u)break;else continue;p=j?i.lastIndexOf(u):i.indexOf(u)+u.length;if(j?p!=i.length-u.length:p!=u.length)break;u={line:o.line,ch:q};n={line:n,ch:p};return{from:j?n:u,to:j?u:n}}}}}f.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(f){function q(f){f={line:f,ch:0};n.pos={from:f,to:f};return n.atOccurrence=!1}for(var n=this,j=this.cm.clipPos(f?this.pos.from:
this.pos.to);;){if(this.pos=this.matches(f,j))return this.atOccurrence=!0,this.pos.match||!0;if(f){if(!j.line)return q(0);j={line:j.line-1,ch:this.cm.getLine(j.line-1).length}}else{var y=this.cm.lineCount();if(j.line==y-1)return q(y);j={line:j.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(f){this.atOccurrence&&(this.pos.to=this.cm.replaceRange(f,this.pos.from,this.pos.to))}};CodeMirror.defineExtension("getSearchCursor",
function(z,q,n){return new f(this,z,q,n)})})();(function(){function f(){this.posFrom=this.posTo=this.query=null;this.marked=[]}function z(i,f,j,n){i.openDialog?i.openDialog(f,n):n(prompt(j,""))}function q(i,f,j,n){if(i.openConfirm)i.openConfirm(f,n);else if(confirm(j))n[0]()}function n(i){var f=i.match(/^\/(.*)\/$/);return f?RegExp(f[1]):i}function j(i,j){var p=i._searchState||(i._searchState=new f);if(p.query)return y(i,j);z(i,o,"Search for:",function(f){i.operation(function(){if(f&&!p.query){p.query=n(f);if(2E3>i.lineCount())for(var o=i.getSearchCursor(f);o.findNext();)p.marked.push(i.markText(o.from(),
o.to(),"CodeMirror-searching"));p.posFrom=p.posTo=i.getCursor();y(i,j)}})})}function y(i,j){i.operation(function(){var n=i._searchState||(i._searchState=new f),o=i.getSearchCursor(n.query,j?n.posFrom:n.posTo);if(!o.find(j)&&(o=i.getSearchCursor(n.query,j?{line:i.lineCount()-1}:{line:0,ch:0}),!o.find(j)))return;i.setSelection(o.from(),o.to());n.posFrom=o.from();n.posTo=o.to()})}function x(i){i.operation(function(){var j=i._searchState||(i._searchState=new f);if(j.query){j.query=null;for(var n=0;n<
j.marked.length;++n)j.marked[n].clear();j.marked.length=0}})}function v(i,f){z(i,w,"Replace:",function(j){j&&(j=n(j),z(i,p,"Replace with:",function(n){if(f)i.operation(function(){for(var f=i.getSearchCursor(j);f.findNext();)if("string"!=typeof j){var o=i.getRange(f.from(),f.to()).match(j);f.replace(n.replace(/\$(\d)/,function(f,i){return o[i]}))}else f.replace(n)});else{x(i);var o=i.getSearchCursor(j,i.getCursor()),p=function(){var f=o.from(),n;if(!(n=o.findNext()))if(o=i.getSearchCursor(j),!(n=o.findNext())||
o.from().line==f.line&&o.from().ch==f.ch)return;i.setSelection(o.from(),o.to());q(i,u,"Replace?",[function(){v(n)},p])},v=function(f){o.replace("string"==typeof j?n:n.replace(/\$(\d)/,function(i,j){return f[j]}));p()};p()}}))})}var o='Search: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',w='Replace: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',p='With: <input type="text" style="width: 10em">',
u="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(f){x(f);j(f)};CodeMirror.commands.findNext=j;CodeMirror.commands.findPrev=function(f){j(f,!0)};CodeMirror.commands.clearSearch=x;CodeMirror.commands.replace=v;CodeMirror.commands.replaceAll=function(f){v(f,!0)}})();(function(){CodeMirror.simpleHint=function(f,z){function q(){w||(w=!0,x.parentNode.removeChild(x))}function n(){f.replaceRange(y[v.selectedIndex],j.from,j.to);q();setTimeout(function(){f.focus()},50)}if(!f.somethingSelected()){var j=z(f);if(j&&j.list.length){var y=j.list;if(1==y.length)return f.replaceRange(y[0],j.from,j.to),!0;var x=document.createElement("div");x.className="CodeMirror-completions";var v=x.appendChild(document.createElement("select"));window.opera||(v.multiple=!0);for(var o=0;o<
y.length;++o)v.appendChild(document.createElement("option")).appendChild(document.createTextNode(y[o]));v.firstChild.selected=!0;v.size=Math.min(10,y.length);o=f.cursorCoords();x.style.left=o.x+"px";x.style.top=o.yBot+"px";document.body.appendChild(x);10>=y.length&&(x.style.width=v.clientWidth-1+"px");var w=!1;CodeMirror.connect(v,"blur",q);CodeMirror.connect(v,"keydown",function(j){var o=j.keyCode;13==o?(CodeMirror.e_stop(j),n()):27==o?(CodeMirror.e_stop(j),q(),f.focus()):38!=o&&40!=o&&(q(),f.focus(),
setTimeout(function(){CodeMirror.simpleHint(f,z)},50))});CodeMirror.connect(v,"dblclick",n);v.focus();window.opera&&setTimeout(function(){w||v.focus()},100);return!0}}}})();(function(){function f(f,j){for(var o=0,n=f.length;o<n;++o)j(f[o])}function z(x,v){function o(f){var i;if(i=0==f.indexOf(u)){a:if(Array.prototype.indexOf)i=-1!=p.indexOf(f);else{for(i=p.length;i--;)if(p[i]===f){i=!0;break a}i=!1}i=!i}i&&p.push(f)}function w(i){"string"==typeof i?f(q,o):i instanceof Array?f(n,o):i instanceof Function&&f(j,o);for(var p in i)o(p)}var p=[],u=x.string;if(v){var i=v.pop(),z;for("variable"==i.className?z=window[i.string]:"string"==i.className?z="":"atom"==i.className&&(z=
1);null!=z&&v.length;)z=z[v.pop().string];null!=z&&w(z)}else{for(i=x.state.localVars;i;i=i.next)o(i.name);w(window);f(y,o)}return p}CodeMirror.javascriptHint=function(f){var j=f.getCursor(),n=f.getTokenAt(j),q=n;for(/^[\w$_]*$/.test(n.string)||(n=q={start:j.ch,end:j.ch,string:"",state:n.state,className:"."==n.string?"property":null});"property"==q.className;){q=f.getTokenAt({line:j.line,ch:q.start});if("."!=q.string)return;q=f.getTokenAt({line:j.line,ch:q.start});if(!p)var p=[];p.push(q)}return{list:z(n,
p),from:{line:j.line,ch:n.start},to:{line:j.line,ch:n.end}}};var q="charAt,charCodeAt,indexOf,lastIndexOf,substring,substr,slice,trim,trimLeft,trimRight,toUpperCase,toLowerCase,split,concat,match,replace,search".split(","),n="length,concat,join,splice,push,pop,shift,unshift,slice,reverse,sort,indexOf,lastIndexOf,every,some,filter,forEach,map,reduce,reduceRight".split(","),j=["prototype","apply","call","bind"],y="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,throw,true,try,typeof,var,void,while,with".split(",")})();CodeMirror.overlayParser=function(f,z,q){return{startState:function(){return{base:CodeMirror.startState(f),overlay:CodeMirror.startState(z),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(n){return{base:CodeMirror.copyState(f,n.base),overlay:CodeMirror.copyState(z,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(n,j){n.start==j.basePos&&(j.baseCur=f.token(n,j.base),j.basePos=n.pos);n.start==j.overlayPos&&(n.pos=n.start,j.overlayCur=
z.token(n,j.overlay),j.overlayPos=n.pos);n.pos=Math.min(j.basePos,j.overlayPos);n.eol()&&(j.basePos=j.overlayPos=0);return null==j.overlayCur?j.baseCur:null!=j.baseCur&&q?j.baseCur+" "+j.overlayCur:j.overlayCur},indent:function(n,j){return f.indent(n.base,j)},electricChars:f.electricChars}};
