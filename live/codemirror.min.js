'use strict';var CodeMirror=function(){function n(a,b){var c,d,e;function f(i){return 0<=i&&i<m.size}function h(i){for(var a=m;!a.lines;)for(var g=0;;++g){var b=a.children[g],c=b.chunkSize();if(i<c){a=b;break}i-=c}return a.lines[i]}function s(i,a){$=!0;for(var g=a-i.height,b=i;b;b=b.parent)b.height+=g}function Qa(i){var a={line:0,ch:0};K(a,{line:m.size-1,ch:h(m.size-1).text.length},Aa(i),a,a);da=!0}function Pb(i){var a=na[E(i,"keyCode")],g=A[j.keyMap].auto,b,c;if(null==a||i.altGraphKey)return g&&
(j.keyMap=g.call?g.call(null,w):g),null;E(i,"altKey")&&(a="Alt-"+a);E(i,"ctrlKey")&&(a="Ctrl-"+a);E(i,"metaKey")&&(a="Cmd-"+a);E(i,"shiftKey")&&(b=Qb("Shift-"+a,j.extraKeys,j.keyMap))?c=!0:b=Qb(a,j.extraKeys,j.keyMap);"string"==typeof b&&(b=hb.propertyIsEnumerable(b)?hb[b]:null);if(a=g)if(!(a=b))a=na[E(i,"keyCode")],a=!("Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a);a&&(j.keyMap=g.call?g.call(null,w):g);if(!b)return!1;g=R;try{j.readOnly&&(Ra=!0),c&&(R=null),b(w)}finally{R=g,Ra=!1}y(i);return!0}function B(){if("nocursor"!=
j.readOnly){if(!S){if(j.onFocus)j.onFocus(w);S=!0;-1==z.className.search(/\bCodeMirror-focused\b/)&&(z.className+=" CodeMirror-focused");Ba||N(!0)}Sa();Rb()}}function ib(){if(S){if(j.onBlur)j.onBlur(w);S=!1;ea&&k(function(){ea&&(ea(),ea=null)})();z.className=z.className.replace(" CodeMirror-focused","")}clearInterval(jb);setTimeout(function(){S||(R=null)},150)}function K(i,a,g,b,c){if(!Ra){if(T){var d=[];m.iter(i.line,a.line+1,function(i){d.push(i.text)});for(T.addChange(i.line,g.length,d);T.done.length>
j.undoDepth;)T.done.shift()}O(i,a,g,b,c)}}function Tb(i,a,g){for(var b=(i=i.pop())?i.length:0,c=[],d=0<g?0:b-1,b=0<g?b:-1;d!=b;d+=g){var e=i[d],f=[],o=e.start+e.added;m.iter(e.start,o,function(i){f.push(i.text)});c.push({start:e.start,added:e.old.length,old:f});var j=D({line:e.start+e.old.length-1,ch:uc(f[f.length-1],e.old[e.old.length-1])});O({line:e.start,ch:0},{line:o-1,ch:h(o-1).text.length},e.old,j,j)}da=!0;a.push(c)}function O(i,a,g,b,ua){if(!Ra){var e=!1,f=fa.length;j.lineWrapping||m.iter(i.line,
a.line,function(i){if(i.text.length==f)return e=!0});if(i.line!=a.line||1<g.length)$=!0;var G=a.line-i.line,o=h(i.line),p=h(a.line);if(0==i.ch&&0==a.ch&&""==g[g.length-1]){var k=[],o=null;i.line?(o=h(i.line-1),o.fixMarkEnds(p)):p.fixMarkStarts();for(var x=0,W=g.length-1;x<W;++x)k.push(P.inheritMarks(g[x],o));G&&m.remove(i.line,G,Ca);k.length&&m.insert(i.line,k)}else if(o==p)if(1==g.length)o.replace(i.ch,a.ch,g[0]);else{p=o.split(a.ch,g[g.length-1]);o.replace(i.ch,null,g[0]);o.fixMarkEnds(p);k=[];
x=1;for(W=g.length-1;x<W;++x)k.push(P.inheritMarks(g[x],o));k.push(p);m.insert(i.line+1,k)}else if(1==g.length)o.replace(i.ch,null,g[0]),p.replace(null,a.ch,""),o.append(p),m.remove(i.line+1,G,Ca);else{k=[];o.replace(i.ch,null,g[0]);p.replace(null,a.ch,g[g.length-1]);o.fixMarkEnds(p);x=1;for(W=g.length-1;x<W;++x)k.push(P.inheritMarks(g[x],o));1<G&&m.remove(i.line+1,G-1,Ca);m.insert(i.line+1,k)}if(j.lineWrapping){var n=l.clientWidth/kb()-3;m.iter(i.line,i.line+g.length,function(i){if(!i.hidden){var a=
Math.ceil(i.text.length/n)||1;a!=i.height&&s(i,a)}})}else m.iter(i.line,x+g.length,function(i){i=i.text;i.length>f&&(fa=i,f=i.length,ga=null,e=!1)}),e&&(f=0,fa="",ga=null,m.iter(0,m.size,function(i){i=i.text;i.length>f&&(f=i.length,fa=i)}));p=[];G=g.length-G-1;x=0;for(k=X.length;x<k;++x)W=X[x],W<i.line?p.push(W):W>a.line&&p.push(W+G);x=i.line+Math.min(g.length,500);vc(i.line,x);p.push(x);X=p;lb(100);U.push({from:i.line,to:a.line+1,diff:G});i={from:i,to:a,text:g};if(Da){for(g=Da;g.next;g=g.next);g.next=
i}else Da=i;Ea(b,ua,c.line<=Math.min(a.line,a.line+G)?c.line:c.line+G,d.line<=Math.min(a.line,a.line+G)?d.line:d.line+G);l.clientHeight&&(J.style.height=m.height*aa()+2*r.offsetTop+"px")}}function H(i,a,g){function b(c){if(I(c,a))return c;if(!I(g,c))return e;var d=c.line+i.length-(g.line-a.line)-1,gb=c.ch;c.line==g.line&&(gb+=i[i.length-1].length-(g.ch-(g.line==a.line?a.ch:0)));return{line:d,ch:gb}}var a=D(a),g=g?D(g):a,i=Aa(i),e;Ub(i,a,g,function(i){e=i;return{from:b(c),to:b(d)}});return e}function L(i,
a){Ub(Aa(i),c,d,function(i){return"end"==a?{from:i,to:i}:"start"==a?{from:c,to:c}:{from:c,to:i}})}function Ub(i,a,g,b){b=b({line:a.line+i.length-1,ch:1==i.length?i[0].length+a.ch:i[i.length-1].length});K(a,g,i,b.from,b.to)}function Vb(i,a){var g=i.line,b=a.line;if(g==b)return h(g).text.slice(i.ch,a.ch);var c=[h(g).text.slice(i.ch)];m.iter(g+1,b,function(i){c.push(i.text)});c.push(h(b).text.slice(0,a.ch));return c.join("\n")}function Ta(){return Vb(c,d)}function Sa(){mb||nb.set(j.pollInterval,function(){ob();
Wb();S&&Sa();pb()})}function ba(){function i(){ob();!Wb()&&!a?(a=!0,nb.set(60,i)):(mb=!1,Sa());pb()}var a=!1;mb=!0;nb.set(20,i)}function Wb(){if(Ba||!S||wc(v)||j.readOnly)return!1;var i=v.value;if(i==ha)return!1;R=null;for(var a=0,g=Math.min(ha.length,i.length);a<g&&ha[a]==i[a];)++a;a<ha.length?c={line:c.line,ch:c.ch-(ha.length-a)}:qb&&t(c,d)&&(d={line:d.line,ch:Math.min(h(d.line).text.length,d.ch+(i.length-a))});L(i.slice(a),"end");ha=i;return!0}function N(a){t(c,d)?a&&(ha=v.value=""):(ha="",v.value=
Ta(),v.select())}function oa(){"nocursor"!=j.readOnly&&v.focus()}function ya(){if(Y.getBoundingClientRect){var a=Y.getBoundingClientRect();if(!(Fa&&a.top==a.bottom)){var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>a.top||a.bottom>b)&&Y.scrollIntoView()}}}function ta(){var a=va(e?c:d),b=j.lineWrapping?Math.min(a.x,r.offsetWidth):a.x;return za(b,a.y,b,a.yBot)}function za(a,b,g,c){var d=r.offsetLeft,e=r.offsetTop,f=aa(),b=b+e,c=c+e,a=a+d,g=g+d,
h=l.clientHeight,o=l.scrollTop,d=!1,e=!0;b<o?(l.scrollTop=Math.max(0,b-2*f),d=!0):c>o+h&&(l.scrollTop=c+f-h,d=!0);b=l.clientWidth;c=l.scrollLeft;f=j.fixedGutter?M.clientWidth:0;a<c+f?(50>a&&(a=0),l.scrollLeft=Math.max(0,a-10-f),d=!0):g>b+c-3&&(l.scrollLeft=g+10-b,d=!0,g>J.clientWidth&&(e=!1));if(d&&j.onScroll)j.onScroll(w);return e}function Pa(){var a=aa(),b=l.scrollTop-r.offsetTop,g=Math.max(0,Math.floor(b/a)),a=Math.ceil((b+l.clientHeight)/a);return{from:rb(m,g),to:rb(m,a)}}function pa(a,b){if(l.clientWidth){var g=
Pa();if(!(!0!==a&&0==a.length&&g.from>F&&g.to<Q)){var c=Math.max(g.from-100,0),g=Math.min(m.size,g.to+100);F<c&&20>c-F&&(c=F);Q>g&&20>Q-g&&(g=Math.min(m.size,Q));for(var d=!0===a?[]:Ob([{from:F,to:Q,domStart:0}],a),e=0,f=0;f<d.length;++f){var h=d[f];h.from<c&&(h.domStart+=c-h.from,h.from=c);h.to>g&&(h.to=g);h.from>=h.to?d.splice(f--,1):e+=h.to-h.from}if(e!=g-c){d.sort(function(a,i){return a.domStart-i.domStart});var o=aa(),e=M.style.display;V.style.display="none";xc(c,g,d);V.style.display=M.style.display=
"";(f=c!=F||g!=Q||Xb!=l.clientHeight+o)&&(Xb=l.clientHeight+o);F=c;Q=g;Ga=sb(m,c);Ua.style.top=Ga*o+"px";l.clientHeight&&(J.style.height=m.height*o+2*r.offsetTop+"px");if(V.childNodes.length!=Q-F)throw Error("BAD PATCH! "+JSON.stringify(d)+" size="+(Q-F)+" nodes="+V.childNodes.length);if(j.lineWrapping){ga=l.clientWidth;var p=V.firstChild,k=!1;m.iter(F,Q,function(a){if(!a.hidden){var i=Math.round(p.offsetHeight/o)||1;a.height!=i&&(s(a,i),$=k=!0)}p=p.nextSibling});k&&(J.style.height=m.height*o+2*r.offsetTop+
"px")}else null==ga&&(ga=tb(fa)),ga>l.clientWidth?(r.style.width=ga+"px",J.style.width="",J.style.width=l.scrollWidth+"px"):r.style.width=J.style.width="";M.style.display=e;(f||$)&&Yb();Zb();if(!b&&j.onUpdate)j.onUpdate(w);return!0}}}else F=Q=Ga=0}function Ob(a,b){for(var g=0,c=b.length||0;g<c;++g){for(var d=b[g],e=[],f=d.diff||0,h=0,j=a.length;h<j;++h){var p=a[h];d.to<=p.from&&d.diff?e.push({from:p.from+f,to:p.to+f,domStart:p.domStart}):d.to<=p.from||d.from>=p.to?e.push(p):(d.from>p.from&&e.push({from:p.from,
to:d.from,domStart:p.domStart}),d.to<p.to&&e.push({from:d.to+f,to:p.to+f,domStart:p.domStart+(d.to-p.from)}))}a=e}return a}function xc(a,b,g){if(g.length){for(var c=function(a){var i=a.nextSibling;a.parentNode.removeChild(a);return i},d=0,e=V.firstChild,f=0;f<g.length;++f){for(var h=g[f];h.domStart>d;)e=c(e),d++;for(var j=0,h=h.to-h.from;j<h;++j)e=e.nextSibling,d++}for(;e;)e=c(e)}else V.innerHTML="";var p=g.shift(),e=V.firstChild,j=a,k=qa.createElement("div");m.iter(a,b,function(a){p&&p.to==j&&(p=
g.shift());if(!p||p.from>j){if(a.hidden)var i=k.innerHTML="<pre></pre>";else i="<pre>"+a.getHTML(ub)+"</pre>",a.className&&(i='<div style="position: relative"><pre class="'+a.className+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+i+"</div>");k.innerHTML=i;V.insertBefore(k.firstChild,e)}else e=e.nextSibling;++j})}function Yb(){if(j.gutter||j.lineNumbers){var a=Ua.offsetHeight,b=l.clientHeight;M.style.height=(2>a-b?b:a)+"px";var g=[],c=F;m.iter(F,Math.max(Q,
F+1),function(a){if(a.hidden)g.push("<pre></pre>");else{var i=a.gutterMarker,b=j.lineNumbers?c+j.firstLineNumber:null;i&&i.text?b=i.text.replace("%N%",null!=b?b:""):null==b&&(b="\u00a0");g.push(i&&i.style?'<pre class="'+i.style+'">':"<pre>",b);for(i=1;i<a.height;++i)g.push("<br/>&#160;");g.push("</pre>")}++c});M.style.display="none";Ha.innerHTML=g.join("");for(var a=(""+m.size).length,b=Ha.firstChild,d=b.textContent||b.innerText||b.nodeValue||"",e="";d.length+e.length<a;)e+="\u00a0";e&&b.insertBefore(qa.createTextNode(e),
b.firstChild);M.style.display="";r.style.marginLeft=M.offsetWidth+"px";$=!1}}function Zb(){var a=t(c,d),b=va(c,!0),g=a?b:va(d,!0),f=e?b:g,h=aa(),u=ra(z),Sb=ra(V);Ia.style.top=Math.max(0,Math.min(l.offsetHeight,f.y+Sb.top-u.top))+"px";Ia.style.left=Math.max(0,Math.min(l.offsetWidth,f.x+Sb.left-u.left))+"px";if(a)Y.style.top=f.y+"px",Y.style.left=(j.lineWrapping?Math.min(f.x,r.offsetWidth):f.x)+"px",Y.style.display="",Va.style.display="none";else{var a=b.y==g.y,k="",f=function(a,i,b,g){k+='<div class="CodeMirror-selected" style="position: absolute; left: '+
a+"px; top: "+i+"px; right: "+b+"px; height: "+g+'px"></div>'};c.ch&&0<=b.y&&f(b.x,b.y,a?r.clientWidth-g.x:0,h);b=Math.max(0,b.y+(c.ch?h:0));u=Math.min(g.y,r.clientHeight)-b;u>0.2*h&&f(0,b,0,u);(!a||!c.ch)&&g.y<r.clientHeight-0.5*h&&f(0,g.y,r.clientWidth-g.x,h);Va.innerHTML=k;Y.style.display="none";Va.style.display=""}}function $b(a){R=a?R||(e?d:c):null}function ia(a,b){var g=R&&D(R);g&&(I(g,a)?a=g:I(b,g)&&(b=g));Ea(a,b);Wa=!0}function Ea(a,b,g,f){Xa=null;null==g&&(g=c.line,f=d.line);if(!t(c,a)||
!t(d,b)){if(I(b,a))var h=b,b=a,a=h;a.line!=g&&(a=Ya(a,g,c.ch));b.line!=f&&(b=Ya(b,f,d.ch));t(a,b)?e=!1:t(a,d)?e=!1:t(b,c)&&(e=!0);c=a;d=b;ja=!0}}function Ya(a,b,g){function c(b){for(var d=a.line+b,e=1==b?m.size:-1;d!=e;){var ca=h(d);if(!ca.hidden){b=a.ch;if(b>g||b>ca.text.length)b=ca.text.length;return{line:d,ch:b}}d+=b}}return!h(a.line).hidden?a:a.line>=b?c(1)||c(-1):c(-1)||c(1)}function ka(a,b,g){a=D({line:a,ch:b||0});(g?ia:Ea)(a,a)}function Za(a){return Math.max(0,Math.min(a,m.size-1))}function D(a){if(0>
a.line)return{line:0,ch:0};if(a.line>=m.size)return{line:m.size-1,ch:h(m.size-1).text.length};var b=a.ch,g=h(a.line).text.length;return null==b||b>g?{line:a.line,ch:g}:0>b?{line:a.line,ch:0}:a}function vb(a,b){function g(b){if(j==(0>a?0:k.text.length)){if(b=!b)a:{for(var b=ua+a,g=0>a?-1:m.size;b!=g;b+=a){var c=h(b);if(!c.hidden){ua=b;k=c;b=!0;break a}}b=void 0}if(b)j=0>a?k.text.length:0;else return!1}else j+=a;return!0}var f=e?c:d,ua=f.line,j=f.ch,k=h(ua);if("char"==b)g();else if("column"==b)g(!0);
else if("word"==b)for(f=!1;!(0>a)||g();){if(wb(k.text.charAt(j)))f=!0;else if(f){0>a&&(a=1,g());break}if(0<a&&!g())break}return{line:ua,ch:j}}function ac(a){for(var b=h(a.line).text,g=a.ch,c=a.ch;0<g&&wb(b.charAt(g-1));)--g;for(;c<b.length&&wb(b.charAt(c));)++c;ia({line:a.line,ch:g},{line:a.line,ch:c})}function yc(a){ia({line:a,ch:0},{line:a,ch:h(a).text.length})}function $a(a,b){b||(b="add");if("smart"==b)if(C.indent)var g=ab(a);else b="prev";var e=h(a),f=e.indentation(j.tabSize),u=e.text.match(/^\s*/)[0],
k;"prev"==b?k=a?h(a-1).indentation(j.tabSize):0:"smart"==b?k=C.indent(g,e.text.slice(u.length),e.text):"add"==b?k=f+j.indentUnit:"subtract"==b&&(k=f-j.indentUnit);k=Math.max(0,k);if(k-f){f="";g=0;if(j.indentWithTabs)for(e=Math.floor(k/j.tabSize);e;--e)g+=j.tabSize,f+="\t";for(;g<k;)++g,f+=" "}else{if(c.line!=a&&d.line!=a)return;f=u}H(f,{line:a,ch:0},{line:a,ch:u.length})}function bc(){C=n.getMode(j,j.mode);m.iter(0,m.size,function(a){a.stateAfter=null});X=[0];lb()}function zc(){if(j.lineWrapping){z.className+=
" CodeMirror-wrap";var a=l.clientWidth/kb()-3;m.iter(0,m.size,function(b){if(!b.hidden){var g=Math.ceil(b.text.length/a)||1;1!=g&&s(b,g)}});r.style.width=J.style.width=""}else z.className=z.className.replace(" CodeMirror-wrap",""),ga=null,fa="",m.iter(0,m.size,function(a){1!=a.height&&!a.hidden&&s(a,1);a.text.length>fa.length&&(fa=a.text)});U.push({from:0,to:m.size})}function cc(){for(var a='<span class="cm-tab">',b=0;b<j.tabSize;++b)a+=" ";return a+"</span>"}function Ac(){ub=cc();pa(!0)}function dc(){l.className=
l.className.replace(/\s*cm-s-\w+/g,"")+j.theme.replace(/(^|\s)\s*/g," cm-s-")}function xb(){this.set=[]}function yb(a,b,g){function c(a,i,b,g){h(a).addMark(new bb(i,b,g,d.set))}var a=D(a),b=D(b),d=new xb;if(a.line==b.line)c(a.line,a.ch,b.ch,g);else{c(a.line,a.ch,null,g);for(var e=a.line+1,f=b.line;e<f;++e)c(e,null,null,g);c(b.line,null,b.ch,g)}U.push({from:a.line,to:b.line+1});return d}function ec(a,b){var g=a,c=a;"number"==typeof a?c=h(Za(a)):g=Ja(a);if(null!=g&&b(c,g))U.push({from:g,to:g+1});else return null;
return c}function fc(a,b){return ec(a,function(a,i){if(a.hidden!=b){a.hidden=b;s(a,b?0:1);var e=c.line,f=d.line;if(b&&(e==i||f==i))e=e==i?Ya({line:e,ch:0},e,0):c,f=f==i?Ya({line:f,ch:0},f,0):d,Ea(e,f);return $=!0}})}function tb(a){la.innerHTML="<pre><span>x</span></pre>";la.firstChild.firstChild.firstChild.nodeValue=a;return la.firstChild.firstChild.offsetWidth||10}function gc(a,b){if(0==b)return{top:0,left:0};var c="";j.lineWrapping&&(c=a.text.indexOf(" ",b+2),c=Z(a.text.slice(b+1,0>c?a.text.length:
c+(Fa?5:0))));la.innerHTML="<pre>"+a.getHTML(ub,b)+'<span id="CodeMirror-temp-'+hc+'">'+Z(a.text.charAt(b)||" ")+"</span>"+c+"</pre>";var c=document.getElementById("CodeMirror-temp-"+hc),d=c.offsetTop,e=c.offsetLeft;Fa&&0==d&&0==e&&(d=document.createElement("span"),d.innerHTML="x",c.parentNode.insertBefore(d,c.nextSibling),d=d.offsetTop);return{top:d,left:e}}function va(a,b){var c,d=aa(),e=d*(sb(m,a.line)-(b?Ga:0));if(0==a.ch)c=0;else{var f=gc(h(a.line),a.ch);c=f.left;j.lineWrapping&&(e+=Math.max(0,
f.top))}return{x:c,y:e,yBot:e+d}}function zb(a,b){function c(a){a=gc(G,a);if(p){var b=Math.round(a.top/d);return Math.max(0,a.left+(b-s)*l.clientWidth)}return a.left}0>b&&(b=0);var d=aa(),e=kb(),f=Ga+Math.floor(b/d),k=rb(m,f);if(k>=m.size)return{line:m.size-1,ch:h(m.size-1).text.length};var G=h(k),o=G.text,p=j.lineWrapping,s=p?f-sb(m,k):0;if(0>=a&&0==s)return{line:k,ch:0};for(var x=f=0,o=o.length,n,e=Math.min(o,Math.ceil((a+0.9*s*l.clientWidth)/e));;){var r=c(e);if(r<=a&&e<o)e=Math.min(o,Math.ceil(1.2*
e));else{n=r;o=e;break}}if(a>n)return{line:k,ch:o};e=Math.floor(0.8*o);r=c(e);r<a&&(f=e,x=r);for(;;){if(1>=o-f)return{line:k,ch:n-a>a-x?f:o};e=Math.ceil((f+o)/2);r=c(e);r>a?(o=e,n=r):(f=e,x=r)}}function ic(a){var a=va(a,!0),b=ra(r);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function aa(){if(null==sa){sa="<pre>";for(var a=0;49>a;++a)sa+="x<br/>";sa+="x</pre>"}a=V.clientHeight;if(a==jc)return Ab;jc=a;la.innerHTML=sa;Ab=la.firstChild.offsetHeight/50||1;la.innerHTML="";return Ab}function kb(){if(l.clientWidth==
kc)return lc;kc=l.clientWidth;return lc=tb("x")}function wa(a,b){var c=ra(l,!0),d,e;try{d=a.clientX,e=a.clientY}catch(f){return null}if(!b&&(d-c.left>l.clientWidth||e-c.top>l.clientHeight))return null;c=ra(r,!0);return zb(d-c.left,e-c.top)}function mc(a){function b(){var a=Aa(v.value).join("\n");a!=f&&k(L)(a,"end");Ia.style.position="relative";v.style.cssText=e;Ba=!1;N(!0);Sa()}var g=wa(a);if(g&&!window.opera){(t(c,d)||I(g,c)||!I(g,d))&&k(ka)(g.line,g.ch);var e=v.style.cssText;Ia.style.position="absolute";
v.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Ba=!0;var f=v.value=Ta();oa();v.select();if(Bb){Ka(a);var h=q(window,"mouseup",function(){h();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Rb(){clearInterval(jb);var a=!0;Y.style.visibility="";jb=setInterval(function(){Y.style.visibility=(a=!a)?"":"hidden"},
650)}function nc(a){function b(a,i,c){if(a.text)for(var g=a.styles,a=l?0:a.text.length-1,d,e=l?0:g.length-2,f=l?g.length:-2;e!=f;e+=2*s){var h=g[e];if(null!=g[e+1]&&g[e+1]!=n)a+=s*h.length;else for(var ca=l?0:h.length-1,j=l?h.length:-1;ca!=j;ca+=s,a+=s)if(a>=i&&a<c&&v.test(d=h.charAt(ca))){var k=Cb[d];if(">"==k.charAt(1)==l)ba.push(d);else{if(ba.pop()!=k.charAt(0))return{pos:a,match:!1};if(!ba.length)return{pos:a,match:!0}}}}}var g=e?c:d,f=h(g.line),j=g.ch-1,u=0<=j&&Cb[f.text.charAt(j)]||Cb[f.text.charAt(++j)];
if(u){u.charAt(0);for(var l=">"==u.charAt(1),s=l?1:-1,o=f.styles,p=j+1,u=0,r=o.length;u<r;u+=2)if(0>=(p-=o[u].length)){var n=o[u+1];break}for(var ba=[f.text.charAt(j)],v=/[(){}[\]]/,u=g.line,r=l?Math.min(u+100,m.size):Math.max(-1,u-100);u!=r;u+=s){var f=h(u),q=u==g.line;if(q=b(f,q&&l?j+1:0,q&&!l?j:f.text.length))break}q||(q={pos:null,match:!1});var n=q.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",Qa=yb({line:g.line,ch:j},{line:g.line,ch:j+1},n),w=null!=q.pos&&yb({line:u,ch:q.pos},
{line:u,ch:q.pos+1},n),g=k(function(){Qa.clear();w&&w.clear()});a?setTimeout(g,800):ea=g}}function oc(a){for(var b,c,d=a,a=a-40;d>a;--d){if(0==d)return 0;var e=h(d-1);if(e.stateAfter)return d;e=e.indentation(j.tabSize);if(null==c||b>e)c=d-1,b=e}return c}function ab(a){var b=oc(a),c=b&&h(b-1).stateAfter,c=c?xa(C,c):Db(C);m.iter(b,a,function(a){a.highlight(C,c,j.tabSize);a.stateAfter=xa(C,c)});b<a&&U.push({from:b,to:a});a<m.size&&!h(a).stateAfter&&X.push(a);return c}function vc(a,b){var c=ab(a);m.iter(a,
b,function(a){a.highlight(C,c,j.tabSize);a.stateAfter=xa(C,c)})}function Bc(){for(var a=+new Date+j.workTime,b=X.length;X.length;){var c=h(F).stateAfter?X.pop():F;if(!(c>=m.size)){var d=oc(c),e=d&&h(d-1).stateAfter,e=e?xa(C,e):Db(C),f=0,k=C.compareStates,l=!1,o=d,p=!1;m.iter(o,m.size,function(b){var d=b.stateAfter;if(+new Date>a)return X.push(o),lb(j.workDelay),l&&U.push({from:c,to:o+1}),p=!0;var h=b.highlight(C,e,j.tabSize);h&&(l=!0);b.stateAfter=xa(C,e);if(k){if(d&&k(d,e))return!0}else if(!1!==
h||!d)f=0;else if(3<++f&&(!C.indent||C.indent(d,"")==C.indent(e,"")))return!0;++o});if(p)return;l&&U.push({from:c,to:o+1})}}if(b&&j.onHighlightComplete)j.onHighlightComplete(w)}function lb(a){X.length&&Cc.set(a,k(Bc))}function ob(){da=Wa=Da=null;U=[];ja=!1;Ca=[]}function pb(){var a=!1,b;ja&&(a=!ta());U.length?b=pa(U,!0):(ja&&Zb(),$&&Yb());a&&ta();ja&&(ya(),Rb());S&&!Ba&&(!0===da||!1!==da&&ja)&&N(Wa);ja&&j.matchBrackets&&setTimeout(k(function(){ea&&(ea(),ea=null);t(c,d)&&nc(!1)}),20);var g=Da,a=Ca;
if(ja&&j.onCursorActivity)j.onCursorActivity(w);if(g&&j.onChange&&w)j.onChange(w,g);for(g=0;g<a.length;++g)a[g](w);if(b&&j.onUpdate)j.onUpdate(w)}function k(a){return function(){pc++||ob();try{var b=a.apply(this,arguments)}finally{--pc||pb()}return b}}var j={},Eb=n.defaults,La;for(La in Eb)Eb.hasOwnProperty(La)&&(j[La]=(b&&b.hasOwnProperty(La)?b:Eb)[La]);var qa=j.document,z=qa.createElement("div");z.className="CodeMirror"+(j.lineWrapping?" CodeMirror-wrap":"");z.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden; outline: 5px auto none"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';
a.appendChild?a.appendChild(z):a(z);var Ia=z.firstChild,v=Ia.firstChild,l=z.lastChild,J=l.firstChild,Ua=J.firstChild,M=Ua.firstChild,Ha=M.firstChild,r=M.nextSibling.firstChild,la=r.firstChild,Y=la.nextSibling,Va=Y.nextSibling,V=Va.nextSibling;dc();qc&&(v.style.width="0px");Fb||(r.draggable=!0);r.style.outline="none";null!=j.tabindex&&(v.tabIndex=j.tabindex);!j.gutter&&!j.lineNumbers&&(M.style.display="none");try{tb("x")}catch(Gb){throw Gb.message.match(/runtime/i)&&(Gb=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),
Gb;}var nb=new Hb,Cc=new Hb,jb,C,m=new cb([new db([new P("")])]),X,S;bc();c={line:0,ch:0};d={line:0,ch:0};e=!1;var R,eb,Ma,Ib=0,Jb,qb=!1,Ra=!1,da,Wa,U,Da,ja,Ba,$,Ca,Ga=0,F=0,Q=0,Xb=0,ea,fa="",ga,ub=cc();k(function(){Qa(j.value||"");da=!1})();var T=new Kb;q(l,"mousedown",k(function(a){function b(a){var c=wa(a,!0);if(c&&!t(c,f)){S||B();f=c;ia(e,c);da=!1;var i=Pa();if(c.line>=i.to||c.line<i.from)h=setTimeout(k(function(){b(a)}),150)}}$b(E(a,"shiftKey"));for(var g=a.target||a.srcElement;g!=z;g=g.parentNode)if(g.parentNode==
J&&g!=Ua)return;for(g=a.target||a.srcElement;g!=z;g=g.parentNode)if(g.parentNode==Ha){if(j.onGutterClick)j.onGutterClick(w,Na(Ha.childNodes,g)+F,a);return y(a)}var e=wa(a);switch(Dc(a)){case 3:Bb&&!Lb&&mc(a);return;case 2:e&&ka(e.line,e.ch,!0);return}if(e){S||B();g=+new Date;if(Ma&&Ma.time>g-400&&t(Ma.pos,e))return y(a),setTimeout(oa,20),yc(e.line);if(eb&&eb.time>g-400&&t(eb.pos,e))return Ma={time:g,pos:e},y(a),ac(e);eb={time:g,pos:e};var f=e,h;if(rc&&!j.readOnly&&!t(c,d)&&!I(e,c)&&!I(d,e)){Fb&&(r.draggable=
!0);var m=q(qa,"mouseup",k(function(b){Fb&&(r.draggable=!1);Jb=!1;m();10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(y(b),ka(e.line,e.ch,!0),oa())}),!0);Jb=!0}else{y(a);ka(e.line,e.ch,!0);var s=q(qa,"mousemove",k(function(a){clearTimeout(h);y(a);b(a)}),!0),m=q(qa,"mouseup",k(function(a){clearTimeout(h);var b=wa(a);b&&ia(e,b);y(a);oa();da=!0;s();m()}),!0)}}else(a.target||a.srcElement)==l&&y(a)}));q(l,"dblclick",k(function(a){for(var b=a.target||a.srcElement;b!=z;b=b.parentNode)if(b.parentNode==
Ha)return y(a);if(b=wa(a))Ma={time:+new Date,pos:b},y(a),ac(b)}));q(r,"dragstart",function(a){var b=Ta();Z(b);a.dataTransfer.setDragImage(ma,0,0);a.dataTransfer.setData("Text",b)});q(r,"selectstart",y);Bb||q(l,"contextmenu",mc);q(l,"scroll",function(){Ib=l.scrollTop;pa([]);j.fixedGutter&&(M.style.left=l.scrollLeft+"px");if(j.onScroll)j.onScroll(w)});q(window,"resize",function(){pa(!0)});q(v,"keyup",k(function(a){if(!j.onKeyEvent||!j.onKeyEvent(w,Mb(a)))16==E(a,"keyCode")&&(R=null)}));q(v,"input",
ba);q(v,"keydown",k(function(a){S||B();Fa&&27==a.keyCode&&(a.returnValue=!1);if(!j.onKeyEvent||!j.onKeyEvent(w,Mb(a))){var b=E(a,"keyCode");$b(16==b||E(a,"shiftKey"));var c=Pb(a);window.opera&&(Nb=c?b:null,!c&&88==b&&E(a,Lb?"metaKey":"ctrlKey")&&L(""))}}));q(v,"keypress",k(function(a){var b=E(a,"keyCode"),c=E(a,"charCode");window.opera&&b==Nb?(Nb=null,y(a)):j.onKeyEvent&&j.onKeyEvent(w,Mb(a))||window.opera&&!a.which&&Pb(a)||(j.electricChars&&C.electricChars&&j.smartIndent&&!j.readOnly&&(a=String.fromCharCode(null==
c?b:c),-1<C.electricChars.indexOf(a)&&setTimeout(k(function(){$a(d.line,"smart")}),75)),ba())}));q(v,"focus",B);q(v,"blur",ib);q(l,"dragenter",Ka);q(l,"dragover",Ka);q(l,"drop",k(function(a){a.preventDefault();var b=wa(a,!0),e=a.dataTransfer.files;if(b&&!j.readOnly)if(e&&e.length&&window.FileReader&&window.File)for(var a=function(a,c){var i=new FileReader;i.onload=function(){h[c]=i.result;++m==f&&(b=D(b),k(function(){var a=H(h.join(""),b,b);ia(b,a)})())};i.readAsText(a)},f=e.length,h=Array(f),m=0,
l=0;l<f;++l)a(e[l],l);else try{if(h=a.dataTransfer.getData("Text"))e=c,a=d,ia(b,b),Jb&&H("",e,a),L(h),oa()}catch(s){}}));q(l,"paste",function(){oa();ba()});q(v,"paste",ba);q(v,"cut",k(function(){j.readOnly||L("")}));var sc;try{sc=qa.activeElement==v}catch(Ec){}sc?setTimeout(B,20):ib();var w=z.CodeMirror={getValue:function(){var a=[];m.iter(0,m.size,function(b){a.push(b.text)});return a.join("\n")},setValue:k(Qa),getSelection:Ta,replaceSelection:k(L),focus:function(){oa();B();ba()},setOption:function(a,
b){var c=j[a];j[a]=b;"mode"==a||"indentUnit"==a?bc():"readOnly"==a&&"nocursor"==b?(ib(),v.blur()):"readOnly"==a&&!b?N(!0):"theme"==a?dc():"lineWrapping"==a&&c!=b?k(zc)():"tabSize"==a&&k(Ac)();("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a)&&pa(!0)},getOption:function(a){return j[a]},undo:k(function(){Tb(T.done,T.undone,-1)}),redo:k(function(){Tb(T.undone,T.done,1)}),indentLine:k(function(a,b){"string"!=typeof b&&(b=null==b?j.smartIndent?"smart":"prev":b?"add":"subtract");f(a)&&$a(a,
b)}),indentSelection:k(function(a){if(t(c,d))return $a(c.line,a);for(var b=d.line-(d.ch?0:1),e=c.line;e<=b;++e)$a(e,a)}),historySize:function(){return{undo:T.done.length,redo:T.undone.length}},clearHistory:function(){T=new Kb},matchBrackets:k(function(){nc(!0)}),getTokenAt:k(function(a){a=D(a);return h(a.line).getTokenAt(C,ab(a.line),a.ch)}),getStateAfter:function(a){a=Za(null==a?m.size-1:a);return ab(a+1)},cursorCoords:function(a){null==a&&(a=e);return ic(a?c:d)},charCoords:function(a){return ic(D(a))},
coordsChar:function(a){var b=ra(r);return zb(a.x-b.left,a.y-b.top)},markText:k(yb),setBookmark:function(a){var a=D(a),b=new tc(a.ch);h(a.line).addMark(b);return b},setMarker:k(function(a,b,c){"number"==typeof a&&(a=h(Za(a)));a.gutterMarker={text:b,style:c};$=!0;return a}),clearMarker:k(function(a){"number"==typeof a&&(a=h(Za(a)));a.gutterMarker=null;$=!0}),setLineClass:k(function(a,b){return ec(a,function(a){if(a.className!=b)return a.className=b,!0})}),hideLine:k(function(a){return fc(a,!0)}),showLine:k(function(a){return fc(a,
!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!f(a))return null;a=h(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!f(a))return null;var b=a,a=h(a);if(!a)return null}else if(b=Ja(a),null==b)return null;var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className}},addWidget:function(a,b,c,d,e){var a=va(D(a)),f=a.yBot,h=a.x;b.style.position="absolute";J.appendChild(b);if("over"==
d)f=a.y;else if("near"==d){var d=Math.max(l.offsetHeight,m.height*aa()),j=Math.max(J.clientWidth,r.clientWidth)-r.offsetLeft;a.yBot+b.offsetHeight>d&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight);h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=f+r.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(h=J.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(J.clientWidth-b.offsetWidth)/2),b.style.left=h+r.offsetLeft+"px");c&&za(h,f,h+b.offsetWidth,f+b.offsetHeight)},lineCount:function(){return m.size},
clipPos:D,getCursor:function(a){null==a&&(a=e);return{line:(a?c:d).line,ch:(a?c:d).ch}},somethingSelected:function(){return!t(c,d)},setCursor:k(function(a,b,c){null==b&&"number"==typeof a.line?ka(a.line,a.ch,c):ka(a,b,c)}),setSelection:k(function(a,b,c){(c?ia:Ea)(D(a),D(b||a))}),getLine:function(a){if(f(a))return h(a).text},getLineHandle:function(a){if(f(a))return h(a)},setLine:k(function(a,b){f(a)&&H(b,{line:a,ch:0},{line:a,ch:h(a).text.length})}),removeLine:k(function(a){f(a)&&H("",{line:a,ch:0},
D({line:a+1,ch:0}))}),replaceRange:k(H),getRange:function(a,b){return Vb(D(a),D(b))},execCommand:function(a){return hb[a](w)},moveH:k(function(a,b){var e=0>a?c:d;if(R||t(c,d))e=vb(a,b);ka(e.line,e.ch,!0)}),deleteH:k(function(a,b){t(c,d)?0>a?H("",vb(a,b),d):H("",c,vb(a,b)):H("",c,d);Wa=!0}),moveV:k(function(a,b){var g=0,f=va(e?c:d,!0);null!=Xa&&(f.x=Xa);"page"==b?g=Math.min(l.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==b&&(g=aa());g=zb(f.x,f.y+g*a+2);ka(g.line,g.ch,
!0);Xa=f.x}),toggleOverwrite:function(){qb=!qb},posFromIndex:function(a){var b=0,c;m.iter(0,m.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return D({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;m.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(l.scrollTop=a);null!=b&&(l.scrollLeft=b);pa([])},operation:function(a){return k(a)()},refresh:function(){pa(!0);l.scrollHeight>Ib&&(l.scrollTop=Ib)},getInputField:function(){return v},
getWrapperElement:function(){return z},getScrollerElement:function(){return l},getGutterElement:function(){return M}},Nb=null,mb=!1,ha="",Xa=null;xb.prototype.clear=k(function(){for(var a=Infinity,b=-Infinity,c=0,d=this.set.length;c<d;++c){var e=this.set[c],f=e.marked;if(f&&e.parent){e=Ja(e);a=Math.min(a,e);b=Math.max(b,e);for(e=0;e<f.length;++e)f[e].set==this.set&&f.splice(e--,1)}}Infinity!=a&&U.push({from:a,to:b+1})});xb.prototype.find=function(){for(var a,b,c=0,e=this.set.length;c<e;++c)for(var d=
this.set[c],f=d.marked,h=0;h<f.length;++h){var j=f[h];if(j.set==this.set&&(null!=j.from||null!=j.to)){var k=Ja(d);null!=k&&(null!=j.from&&(a={line:k,ch:j.from}),null!=j.to&&(b={line:k,ch:j.to}))}}return{from:a,to:b}};var hc=Math.floor(16777215*Math.random()).toString(16),Ab,jc,sa,lc,kc=0,Cb={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},pc=0,Oa;for(Oa in fb)fb.propertyIsEnumerable(Oa)&&!w.propertyIsEnumerable(Oa)&&(w[Oa]=fb[Oa]);return w}function Qb(a,b,c){function d(a,b,c){var s=b[a];if(null!=
s)return s;null==c&&(c=b.fallthrough);if(null==c)return b.catchall;if("string"==typeof c)return d(a,A[c]);for(var b=0,n=c.length;b<n;++b)if(s=d(a,A[c[b]]),null!=s)return s;return null}return b?d(a,b,c):d(a,A[c])}function xa(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function Db(a,b,c){return a.startState?a.startState(b,c):!0}function N(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}
function bb(a,b,c,d){this.from=a;this.to=b;this.style=c;this.set=d}function tc(a){this.to=this.from=a;this.line=null}function P(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.stateAfter=this.parent=this.hidden=this.marked=this.gutterMarker=this.className=this.handlers=null}function ya(a,b,c,d){for(var e=0,f=0,h=0;f<b;e+=2){var s=c[e],n=f+s.length;0==h?(n>a&&d.push(s.slice(a-f,Math.min(s.length,b-f)),c[e+1]),n>=a&&(h=1)):1==h&&(n>b?d.push(s.slice(0,b-f),c[e+1]):d.push(s,c[e+1]));f=n}}
function db(a){this.lines=a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function cb(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d],b=b+f.chunkSize(),c=c+f.height;f.parent=this}this.size=b;this.height=c;this.parent=null}function Ja(a){if(null==a.parent)return null;for(var b=a.parent,a=Na(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;!(c.children[d]==b);++d)a+=c.children[d].chunkSize();return a}function rb(a,b){var c=
0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],h=f.height;if(b<h){a=f;continue a}b-=h;c+=f.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){f=a.lines[d].height;if(b<f)break;b-=f}return c+d}function sb(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],h=f.chunkSize();if(b<h){a=f;continue a}b-=h;c+=f.height}return c}while(!a.lines);for(d=0;d<b;++d)c+=a.lines[d].height;return c}function Kb(){this.time=0;this.done=[];this.undone=
[]}function Ob(){Ka(this)}function Mb(a){a.stop||(a.stop=Ob);return a}function y(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Pa(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ka(a){y(a);Pa(a)}function Dc(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function E(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function q(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,
c,!1),d)return function(){a.removeEventListener(b,c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function Hb(){this.id=null}function za(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function ra(a,b){for(var c=a.ownerDocument.body,d=0,e=0,f=!1,h=a;h;h=h.offsetParent){var s=h.offsetLeft,n=h.offsetTop;h==c?(d+=Math.abs(s),e+=Math.abs(n)):(d+=s,
e+=n);b&&"fixed"==(h.currentStyle?h.currentStyle:window.getComputedStyle(h,null)).position&&(f=!0)}c=b&&!f?null:c;for(h=a.parentNode;h!=c;h=h.parentNode)null!=h.scrollLeft&&(d-=h.scrollLeft,e-=h.scrollTop);return{left:d,top:e}}function t(a,b){return a.line==b.line&&a.ch==b.ch}function I(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Z(a){ma.textContent=a;return ma.innerHTML}function uc(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;0<=c&&0<=d&&!(a.charAt(c)!=
b.charAt(d));--c,--d);return d+1}function Na(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function wb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}n.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,
onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var qc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Lb=qc||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var ta={},K={};n.defineMode=function(a,b){!n.defaults.mode&&"null"!=a&&(n.defaults.mode=a);ta[a]=b};n.defineMIME=function(a,b){K[a]=b};
n.getMode=function(a,b){"string"==typeof b&&K.hasOwnProperty(b)&&(b=K[b]);if("string"==typeof b)var c=b,d={};else null!=b&&(c=b.name,d=b);var e=ta[c];return!e?(window.console&&console.warn("No mode "+c+" found, falling back to plain text."),n.getMode(a,"text/plain")):e(a,d||{})};n.listModes=function(){var a=[],b;for(b in ta)ta.propertyIsEnumerable(b)&&a.push(b);return a};n.listMIMEs=function(){var a=[],b;for(b in K)K.propertyIsEnumerable(b)&&a.push({mime:b,mode:K[b]});return a};var fb=n.extensions=
{};n.defineExtension=function(a,b){fb[a]=b};var hb=n.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!t(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,
0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},
indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},A=n.keyMap=
{};A.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};A.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd",
"Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};A.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft",
"Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};A["default"]=Lb?A.macDefault:A.pcDefault;A.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft",
"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};n.fromTextArea=function(a,b){function c(){a.value=h.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(a.form){var d=q(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var e=a.form.submit,f=function(){c();a.form.submit=
e;a.form.submit();a.form.submit=f};a.form.submit=f}}a.style.display="none";var h=n(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);h.save=c;h.getTextArea=function(){return a};h.toTextArea=function(){c();a.parentNode.removeChild(h.getWrapperElement());a.style.display="";a.form&&(d(),"function"==typeof a.form.submit&&(a.form.submit=e))};return h};n.copyState=xa;n.startState=Db;N.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},
next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);
if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return za(this.string,this.start,this.tabSize)},indentation:function(){return za(this.string,null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&!1!==b)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,
this.pos)}};n.StringStream=N;bb.prototype={attach:function(a){this.set.push(a)},detach:function(a){a=Na(this.set,a);-1<a&&this.set.splice(a,1)},split:function(a,b){return this.to<=a&&null!=this.to?null:new bb(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.set)},dup:function(){return new bb(null,null,this.style,this.set)},clipTo:function(a,b,c,d,e){null!=this.from&&this.from>=b&&(this.from=Math.max(d,this.from)+e);null!=this.to&&this.to>b&&(this.to=d<
this.to?this.to+e:b);if(a&&d>this.from&&(d<this.to||null==this.to))this.from=null;if(c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from))this.to=null},isDead:function(){return null!=this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.set==a.set}};tc.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},
clipTo:function(a,b,c,d,e){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+e)},sameSet:function(){return!1},find:function(){return!this.line||!this.line.parent?null:{line:Ja(this.line),ch:this.from}},clear:function(){if(this.line){var a=Na(this.line.marked,this);-1!=a&&this.line.marked.splice(a,1);this.line=null}}};P.inheritMarks=function(a,b){var c=new P(a),d=b&&b.marked;if(d)for(var e=0;e<d.length;++e)if(null==d[e].to&&d[e].style){var f=
c.marked||(c.marked=[]),h=d[e].dup();f.push(h);h.attach(c)}return c};P.prototype={replace:function(a,b,c){var d=[],e=this.marked,f=null==b?this.text.length:b;ya(0,a,this.styles,d);c&&d.push(c,null);ya(f,this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(f);this.stateAfter=null;if(e){c=c.length-(f-a);for(d=0;d<e.length;++d){var h=e[d];h.clipTo(null==a,a||0,null==b,f,c);h.isDead()&&(h.detach(this),e.splice(d--,1))}}},split:function(a,b){var c=[b,null],d=this.marked;
ya(a,this.text.length,this.styles,c);c=new P(b+this.text.slice(a),c);if(d)for(var e=0;e<d.length;++e){var f=d[e].split(a,b.length);f&&(c.marked||(c.marked=[]),c.marked.push(f),f.attach(c))}return c},append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;ya(0,a.text.length,a.styles,this.styles);if(d)for(a=0;a<d.length;++a)null==d[a].to&&(d[a].to=b);if(c&&c.length){d||(this.marked=d=[]);a=0;a:for(;a<c.length;++a){var e=c[a];if(!e.from)for(var f=0;f<d.length;++f){var h=
d[f];if(h.to==b&&h.sameSet(e)){h.to=null==e.to?null:e.to+b;h.isDead()&&(h.detach(this),c.splice(a--,1));continue a}}d.push(e);e.attach(this);e.from+=b;null!=e.to&&(e.to+=b)}}},fixMarkEnds:function(a){var b=this.marked,a=a.marked;if(b)for(var c=0;c<b.length;++c){var d=b[c],e=null==d.to;if(e&&a)for(var f=0;f<a.length;++f)if(a[f].sameSet(d)){e=!1;break}e&&(d.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);
null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){var c=new N(this.text,c),d=this.styles,e=0,f=!1,h=d[0],n;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var q=a.token(c,b),t=this.text.slice(c.start,c.pos);c.start=c.pos;if(e&&d[e-1]==q)d[e-2]+=t;else if(t){if(!f&&(d[e+1]!=q||e&&d[e-2]!=n))f=!0;d[e++]=t;d[e++]=q;n=h;h=d[e]}if(5E3<c.pos){d[e++]=this.text.slice(c.pos);d[e++]=null;break}}d.length!=
e&&(d.length=e,f=!0);e&&d[e-2]!=n&&(f=!0);return f||(5>d.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c){for(var d=new N(this.text);d.pos<c&&!d.eol();){d.start=d.pos;var e=a.token(d,b)}return{start:d.start,end:d.pos,string:d.current(),className:e||null,state:b}},indentation:function(a){return za(this.text,null,a)},getHTML:function(a,b){function c(b,c){b&&(f&&Fa&&" "==b.charAt(0)&&(b="\u00a0"+b.slice(1)),f=!1,c?e.push('<span class="',c,'">',Z(b).replace(/\t/g,a),"</span>"):e.push(Z(b).replace(/\t/g,
a)))}function d(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var e=[],f=!0,h=this.styles,n=this.text,q=this.marked,t=n.length;null!=b&&(t=Math.min(b,t));if(!n&&null==b)c(" ");else if(!q||!q.length)for(var B=n=0;B<t;n+=2){var y=h[n],E=h[n+1],A=y.length;B+A>t&&(y=y.slice(0,t-B));B+=A;c(y,d(E))}else for(var O=0,n=0,B="",H=q[0].from||0,L=[],I=0,y=function(){for(var a;I<q.length&&((a=q[I]).from==O||null==a.from);)null!=a.style&&L.push(a),++I;H=I<q.length?q[I].from:Infinity;for(a=0;a<L.length;++a){var b=
L[a].to||Infinity;b==O?L.splice(a--,1):H=Math.min(b,H)}};O<t;){H==O&&y();for(A=Math.min(t,H);;){if(B){for(var N=O+B.length,K=E,P=0;P<L.length;++P)K=(K?K+" ":"")+L[P].style;c(N>A?B.slice(0,A-O):B,K);if(N>=A){B=B.slice(A-O);O=A;break}O=N}B=h[n++];E=d(h[n++])}}return e.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};db.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<
e;++d){var f=this.lines[d];this.height-=f.height;f.cleanUp();if(f.handlers)for(var h=0;h<f.handlers.length;++h)c.push(f.handlers[h])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines.splice.apply(this.lines,[a,0].concat(b));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};cb.prototype={chunkSize:function(){return this.size},remove:function(a,
b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){var h=Math.min(b,f-a),n=e.height;e.remove(a,h,c);this.height-=n-e.height;f==h&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=h))break;a=0}else a-=f}25>this.size-b&&(a=[],this.collapse(a),this.children=[new db(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<
e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],h=f.chunkSize();if(a<=h){f.insertHeight(a,b,c);if(f.lines&&50<f.lines.length){for(;50<f.lines.length;)a=f.lines.splice(f.lines.length-25,25),a=new db(a),f.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=h}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-
5,5),b=new cb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Na(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new cb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],h=f.chunkSize();if(a<h){h=Math.min(b,h-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=h}}};Kb.prototype=
{addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=this.done[this.done.length-1],f=e&&e[e.length-1];if(400<d-this.time||!f)this.done.push([{start:a,added:b,old:c}]);else if(f.start>a+b||f.start+f.added<a-f.added+f.old.length)e.push({start:a,added:b,old:c});else{var h=0;if(a<f.start){for(e=f.start-a-1;0<=e;--e)f.old.unshift(c[e]);f.added+=f.start-a;f.start=a}else f.start<a&&(h=a-f.start,b+=h);e=f.added-h;for(a=c.length;e<a;++e)f.old.push(c[e]);f.added<b&&(f.added=b)}this.time=d}};n.e_stop=
Ka;n.e_preventDefault=y;n.e_stopPropagation=Pa;n.connect=q;Hb.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)}};var rc;rc=/MSIE [1-8]\b/.test(navigator.userAgent)?!1:"draggable"in document.createElement("div");var Bb=/gecko\/\d{7}/i.test(navigator.userAgent),Fa=/MSIE \d/.test(navigator.userAgent),Fb=/WebKit\//.test(navigator.userAgent);(function(){var a=document.createElement("textarea");a.value="foo\nbar";a.value.indexOf("\r")})();null!=document.documentElement.getBoundingClientRect&&
(ra=function(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body);c.top+=e.scrollTop;c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var ma=document.createElement("pre");"\na"==Z("a")?Z=function(a){ma.textContent=a;return ma.innerHTML.slice(1)}:"\t"!=Z("\t")&&(Z=function(a){ma.innerHTML="";
ma.appendChild(document.createTextNode(a));return ma.innerHTML});n.htmlEscape=Z;var Aa=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c,d=[];-1<(c=a.indexOf("\n",b));)d.push(a.slice(b,"\r"==a.charAt(c-1)?c-1:c)),b=c+1;d.push(a.slice(b));return d}:function(a){return a.split(/\r?\n/)};n.splitLines=Aa;var wc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=
a?!1:0!=b.compareEndPoints("StartToEnd",b)};n.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});n.defineMIME("text/plain","null");var na={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",
221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};n.keyNames=na;(function(){for(var a=0;10>a;a++)na[a+48]=""+a;for(a=65;90>=a;a++)na[a]=String.fromCharCode(a);for(a=1;12>=a;a++)na[a+111]=na[a+63235]="F"+a})();return n}();
