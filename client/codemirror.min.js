'use strict';var CodeMirror=function(){function j(a,b){var c,d,e;function h(k){return 0<=k&&k<s.size}function n(k){for(var a=s;!a.lines;)for(var i=0;;++i){var b=a.children[i],c=b.chunkSize();if(k<c){a=b;break}k-=c}return a.lines[k]}function o(k,a){$=!0;for(var i=a-k.height,b=k;b;b=b.parent)b.height+=i}function g(k){var a={line:0,ch:0};da(a,{line:s.size-1,ch:n(s.size-1).text.length},Ea(k),a,a);ea=!0}function pa(k){var a=qa[M(k,"keyCode")],i=R[l.keyMap].auto,b,c;if(null==a||k.altGraphKey)return i&&
(l.keyMap=i.call?i.call(null,D):i),null;M(k,"altKey")&&(a="Alt-"+a);M(k,"ctrlKey")&&(a="Ctrl-"+a);M(k,"metaKey")&&(a="Cmd-"+a);M(k,"shiftKey")&&(b=x("Shift-"+a,l.extraKeys,l.keyMap))?c=!0:b=x(a,l.extraKeys,l.keyMap);"string"==typeof b&&(b=gb.propertyIsEnumerable(b)?gb[b]:null);if(a=i)if(!(a=b))a=qa[M(k,"keyCode")],a=!("Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a);a&&(l.keyMap=i.call?i.call(null,D):i);if(!b)return!1;i=S;try{l.readOnly&&(Ta=!0),c&&(S=null),b(D)}finally{S=i,Ta=!1}K(k);return!0}function ya(){if("nocursor"!=
l.readOnly){if(!T){if(l.onFocus)l.onFocus(D);T=!0;-1==E.className.search(/\bCodeMirror-focused\b/)&&(E.className+=" CodeMirror-focused");Fa||wa(!0)}Ua();Jb()}}function hb(){if(T){if(l.onBlur)l.onBlur(D);T=!1;fa&&w(function(){fa&&(fa(),fa=null)})();E.className=E.className.replace(" CodeMirror-focused","")}clearInterval(ib);setTimeout(function(){T||(S=null)},150)}function da(k,a,i,b,c){if(!Ta){if(U){var d=[];s.iter(k.line,a.line+1,function(k){d.push(k.text)});for(U.addChange(k.line,i.length,d);U.done.length>
l.undoDepth;)U.done.shift()}Kb(k,a,i,b,c)}}function Lb(k,a,i){for(var b=(k=k.pop())?k.length:0,c=[],d=0<i?0:b-1,b=0<i?b:-1;d!=b;d+=i){var e=k[d],h=[],G=e.start+e.added;s.iter(e.start,G,function(k){h.push(k.text)});c.push({start:e.start,added:e.old.length,old:h});var l=H({line:e.start+e.old.length-1,ch:oc(h[h.length-1],e.old[e.old.length-1])});Kb({line:e.start,ch:0},{line:G-1,ch:n(G-1).text.length},e.old,l,l)}ea=!0;a.push(c)}function Kb(k,a,i,b,nc){if(!Ta){var e=!1,h=ga.length;l.lineWrapping||s.iter(k.line,
a.line,function(k){if(k.text.length==h)return e=!0});if(k.line!=a.line||1<i.length)$=!0;var N=a.line-k.line,G=n(k.line),f=n(a.line);if(0==k.ch&&0==a.ch&&""==i[i.length-1]){var j=[],G=null;k.line?(G=n(k.line-1),G.fixMarkEnds(f)):f.fixMarkStarts();for(var g=0,q=i.length-1;g<q;++g)j.push(p.inheritMarks(i[g],G));N&&s.remove(k.line,N,Ga);j.length&&s.insert(k.line,j)}else if(G==f)if(1==i.length)G.replace(k.ch,a.ch,i[0]);else{f=G.split(a.ch,i[i.length-1]);G.replace(k.ch,null,i[0]);G.fixMarkEnds(f);j=[];
g=1;for(q=i.length-1;g<q;++g)j.push(p.inheritMarks(i[g],G));j.push(f);s.insert(k.line+1,j)}else if(1==i.length)G.replace(k.ch,null,i[0]),f.replace(null,a.ch,""),G.append(f),s.remove(k.line+1,N,Ga);else{j=[];G.replace(k.ch,null,i[0]);f.replace(null,a.ch,i[i.length-1]);G.fixMarkEnds(f);g=1;for(q=i.length-1;g<q;++g)j.push(p.inheritMarks(i[g],G));1<N&&s.remove(k.line+1,N-1,Ga);s.insert(k.line+1,j)}if(l.lineWrapping){var m=t.clientWidth/jb()-3;s.iter(k.line,k.line+i.length,function(k){if(!k.hidden){var a=
Math.ceil(k.text.length/m)||1;a!=k.height&&o(k,a)}})}else s.iter(k.line,g+i.length,function(k){k=k.text;k.length>h&&(ga=k,h=k.length,ha=null,e=!1)}),e&&(h=0,ga="",ha=null,s.iter(0,s.size,function(k){k=k.text;k.length>h&&(h=k.length,ga=k)}));f=[];N=i.length-N-1;g=0;for(j=X.length;g<j;++g)q=X[g],q<k.line?f.push(q):q>a.line&&f.push(q+N);g=k.line+Math.min(i.length,500);pc(k.line,g);f.push(g);X=f;kb(100);V.push({from:k.line,to:a.line+1,diff:N});k={from:k,to:a,text:i};if(Ha){for(i=Ha;i.next;i=i.next);i.next=
k}else Ha=k;Ia(b,nc,c.line<=Math.min(a.line,a.line+N)?c.line:c.line+N,d.line<=Math.min(a.line,a.line+N)?d.line:d.line+N);t.clientHeight&&(L.style.height=s.height*aa()+2*A.offsetTop+"px")}}function ba(k,a,i){function b(c){if(ca(c,a))return c;if(!ca(i,c))return e;var d=c.line+k.length-(i.line-a.line)-1,fb=c.ch;c.line==i.line&&(fb+=k[k.length-1].length-(i.ch-(i.line==a.line?a.ch:0)));return{line:d,ch:fb}}var a=H(a),i=i?H(i):a,k=Ea(k),e;Mb(k,a,i,function(k){e=k;return{from:b(c),to:b(d)}});return e}function za(k,
a){Mb(Ea(k),c,d,function(k){return"end"==a?{from:k,to:k}:"start"==a?{from:c,to:c}:{from:c,to:k}})}function Mb(k,a,i,b){b=b({line:a.line+k.length-1,ch:1==k.length?k[0].length+a.ch:k[k.length-1].length});da(a,i,k,b.from,b.to)}function Nb(k,a){var i=k.line,b=a.line;if(i==b)return n(i).text.slice(k.ch,a.ch);var c=[n(i).text.slice(k.ch)];s.iter(i+1,b,function(k){c.push(k.text)});c.push(n(b).text.slice(0,a.ch));return c.join("\n")}function Va(){return Nb(c,d)}function Ua(){lb||mb.set(l.pollInterval,function(){nb();
Ob();T&&Ua();ob()})}function Ja(){function k(){nb();!Ob()&&!a?(a=!0,mb.set(60,k)):(lb=!1,Ua());ob()}var a=!1;lb=!0;mb.set(20,k)}function Ob(){if(Fa||!T||qc(B)||l.readOnly)return!1;var k=B.value;if(k==ia)return!1;S=null;for(var a=0,i=Math.min(ia.length,k.length);a<i&&ia[a]==k[a];)++a;a<ia.length?c={line:c.line,ch:c.ch-(ia.length-a)}:pb&&I(c,d)&&(d={line:d.line,ch:Math.min(n(d.line).text.length,d.ch+(k.length-a))});za(k.slice(a),"end");ia=k;return!0}function wa(a){I(c,d)?a&&(ia=B.value=""):(ia="",B.value=
Va(),B.select())}function ra(){"nocursor"!=l.readOnly&&B.focus()}function Da(){if(Y.getBoundingClientRect){var a=Y.getBoundingClientRect();if(!(Ka&&a.top==a.bottom)){var b=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(0>a.top||a.bottom>b)&&Y.scrollIntoView()}}}function Ca(){var a=Aa(e?c:d),b=l.lineWrapping?Math.min(a.x,A.offsetWidth):a.x;return Pb(b,a.y,b,a.yBot)}function Pb(a,b,i,c){var d=A.offsetLeft,e=A.offsetTop,h=aa(),b=b+e,c=c+e,a=a+d,i=i+d,
n=t.clientHeight,f=t.scrollTop,d=!1,e=!0;b<f?(t.scrollTop=Math.max(0,b-2*h),d=!0):c>f+n&&(t.scrollTop=c+h-n,d=!0);b=t.clientWidth;c=t.scrollLeft;h=l.fixedGutter?O.clientWidth:0;a<c+h?(50>a&&(a=0),t.scrollLeft=Math.max(0,a-10-h),d=!0):i>b+c-3&&(t.scrollLeft=i+10-b,d=!0,i>L.clientWidth&&(e=!1));if(d&&l.onScroll)l.onScroll(D);return e}function Qb(){var a=aa(),b=t.scrollTop-A.offsetTop,i=Math.max(0,Math.floor(b/a)),a=Math.ceil((b+t.clientHeight)/a);return{from:f(s,i),to:f(s,a)}}function sa(a,b){if(t.clientWidth){var i=
Qb();if(!(!0!==a&&0==a.length&&i.from>J&&i.to<Q)){var c=Math.max(i.from-100,0),i=Math.min(s.size,i.to+100);J<c&&20>c-J&&(c=J);Q>i&&20>Q-i&&(i=Math.min(s.size,Q));for(var d=!0===a?[]:rc([{from:J,to:Q,domStart:0}],a),e=0,h=0;h<d.length;++h){var n=d[h];n.from<c&&(n.domStart+=c-n.from,n.from=c);n.to>i&&(n.to=i);n.from>=n.to?d.splice(h--,1):e+=n.to-n.from}if(e!=i-c){d.sort(function(a,k){return a.domStart-k.domStart});var f=aa(),e=O.style.display;W.style.display="none";sc(c,i,d);W.style.display=O.style.display=
"";(h=c!=J||i!=Q||Rb!=t.clientHeight+f)&&(Rb=t.clientHeight+f);J=c;Q=i;La=ja(s,c);Wa.style.top=La*f+"px";t.clientHeight&&(L.style.height=s.height*f+2*A.offsetTop+"px");if(W.childNodes.length!=Q-J)throw Error("BAD PATCH! "+JSON.stringify(d)+" size="+(Q-J)+" nodes="+W.childNodes.length);if(l.lineWrapping){ha=t.clientWidth;var g=W.firstChild,j=!1;s.iter(J,Q,function(a){if(!a.hidden){var k=Math.round(g.offsetHeight/f)||1;a.height!=k&&(o(a,k),$=j=!0)}g=g.nextSibling});j&&(L.style.height=s.height*f+2*A.offsetTop+
"px")}else null==ha&&(ha=qb(ga)),ha>t.clientWidth?(A.style.width=ha+"px",L.style.width="",L.style.width=t.scrollWidth+"px"):A.style.width=L.style.width="";O.style.display=e;(h||$)&&Sb();Tb();if(!b&&l.onUpdate)l.onUpdate(D);return!0}}}else J=Q=La=0}function rc(a,b){for(var i=0,c=b.length||0;i<c;++i){for(var d=b[i],e=[],h=d.diff||0,n=0,f=a.length;n<f;++n){var l=a[n];d.to<=l.from&&d.diff?e.push({from:l.from+h,to:l.to+h,domStart:l.domStart}):d.to<=l.from||d.from>=l.to?e.push(l):(d.from>l.from&&e.push({from:l.from,
to:d.from,domStart:l.domStart}),d.to<l.to&&e.push({from:d.to+h,to:l.to+h,domStart:l.domStart+(d.to-l.from)}))}a=e}return a}function sc(a,b,i){if(i.length){for(var c=function(a){var k=a.nextSibling;a.parentNode.removeChild(a);return k},d=0,e=W.firstChild,h=0;h<i.length;++h){for(var n=i[h];n.domStart>d;)e=c(e),d++;for(var f=0,n=n.to-n.from;f<n;++f)e=e.nextSibling,d++}for(;e;)e=c(e)}else W.innerHTML="";var l=i.shift(),e=W.firstChild,f=a,g=ta.createElement("div");s.iter(a,b,function(a){l&&l.to==f&&(l=
i.shift());if(!l||l.from>f){if(a.hidden)var k=g.innerHTML="<pre></pre>";else k="<pre>"+a.getHTML(rb)+"</pre>",a.className&&(k='<div style="position: relative"><pre class="'+a.className+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+k+"</div>");g.innerHTML=k;W.insertBefore(g.firstChild,e)}else e=e.nextSibling;++f})}function Sb(){if(l.gutter||l.lineNumbers){var a=Wa.offsetHeight,b=t.clientHeight;O.style.height=(2>a-b?b:a)+"px";var i=[],c=J;s.iter(J,Math.max(Q,
J+1),function(a){if(a.hidden)i.push("<pre></pre>");else{var k=a.gutterMarker,b=l.lineNumbers?c+l.firstLineNumber:null;k&&k.text?b=k.text.replace("%N%",null!=b?b:""):null==b&&(b="\u00a0");i.push(k&&k.style?'<pre class="'+k.style+'">':"<pre>",b);for(k=1;k<a.height;++k)i.push("<br/>&#160;");i.push("</pre>")}++c});O.style.display="none";Ma.innerHTML=i.join("");for(var a=(""+s.size).length,b=Ma.firstChild,d=b.textContent||b.innerText||b.nodeValue||"",e="";d.length+e.length<a;)e+="\u00a0";e&&b.insertBefore(ta.createTextNode(e),
b.firstChild);O.style.display="";A.style.marginLeft=O.offsetWidth+"px";$=!1}}function Tb(){var a=I(c,d),b=Aa(c,!0),i=a?b:Aa(d,!0),h=e?b:i,n=aa(),f=ua(E),g=ua(W);Na.style.top=Math.max(0,Math.min(t.offsetHeight,h.y+g.top-f.top))+"px";Na.style.left=Math.max(0,Math.min(t.offsetWidth,h.x+g.left-f.left))+"px";if(a)Y.style.top=h.y+"px",Y.style.left=(l.lineWrapping?Math.min(h.x,A.offsetWidth):h.x)+"px",Y.style.display="",Xa.style.display="none";else{var a=b.y==i.y,j="",h=function(a,k,b,i){j+='<div class="CodeMirror-selected" style="position: absolute; left: '+
a+"px; top: "+k+"px; right: "+b+"px; height: "+i+'px"></div>'};c.ch&&0<=b.y&&h(b.x,b.y,a?A.clientWidth-i.x:0,n);b=Math.max(0,b.y+(c.ch?n:0));f=Math.min(i.y,A.clientHeight)-b;f>0.2*n&&h(0,b,0,f);(!a||!c.ch)&&i.y<A.clientHeight-0.5*n&&h(0,i.y,A.clientWidth-i.x,n);Xa.innerHTML=j;Y.style.display="none";Xa.style.display=""}}function Ub(a){S=a?S||(e?d:c):null}function ka(a,b){var i=S&&H(S);i&&(ca(i,a)?a=i:ca(b,i)&&(b=i));Ia(a,b);Ya=!0}function Ia(a,b,i,h){Za=null;null==i&&(i=c.line,h=d.line);if(!I(c,a)||
!I(d,b)){if(ca(b,a))var n=b,b=a,a=n;a.line!=i&&(a=$a(a,i,c.ch));b.line!=h&&(b=$a(b,h,d.ch));I(a,b)?e=!1:I(a,d)?e=!1:I(b,c)&&(e=!0);c=a;d=b;la=!0}}function $a(a,b,i){function c(b){for(var d=a.line+b,e=1==b?s.size:-1;d!=e;){var xa=n(d);if(!xa.hidden){b=a.ch;if(b>i||b>xa.text.length)b=xa.text.length;return{line:d,ch:b}}d+=b}}return!n(a.line).hidden?a:a.line>=b?c(1)||c(-1):c(-1)||c(1)}function ma(a,b,i){a=H({line:a,ch:b||0});(i?ka:Ia)(a,a)}function ab(a){return Math.max(0,Math.min(a,s.size-1))}function H(a){if(0>
a.line)return{line:0,ch:0};if(a.line>=s.size)return{line:s.size-1,ch:n(s.size-1).text.length};var b=a.ch,i=n(a.line).text.length;return null==b||b>i?{line:a.line,ch:i}:0>b?{line:a.line,ch:0}:a}function sb(a,b){function i(b){if(l==(0>a?0:g.text.length)){if(b=!b)a:{for(var b=f+a,i=0>a?-1:s.size;b!=i;b+=a){var c=n(b);if(!c.hidden){f=b;g=c;b=!0;break a}}b=void 0}if(b)l=0>a?g.text.length:0;else return!1}else l+=a;return!0}var h=e?c:d,f=h.line,l=h.ch,g=n(f);if("char"==b)i();else if("column"==b)i(!0);else if("word"==
b)for(h=!1;!(0>a)||i();){if(tb(g.text.charAt(l)))h=!0;else if(h){0>a&&(a=1,i());break}if(0<a&&!i())break}return{line:f,ch:l}}function Vb(a){for(var b=n(a.line).text,i=a.ch,c=a.ch;0<i&&tb(b.charAt(i-1));)--i;for(;c<b.length&&tb(b.charAt(c));)++c;ka({line:a.line,ch:i},{line:a.line,ch:c})}function tc(a){ka({line:a,ch:0},{line:a,ch:n(a).text.length})}function bb(a,b){b||(b="add");if("smart"==b)if(F.indent)var i=cb(a);else b="prev";var e=n(a),h=e.indentation(l.tabSize),f=e.text.match(/^\s*/)[0],g;"prev"==
b?g=a?n(a-1).indentation(l.tabSize):0:"smart"==b?g=F.indent(i,e.text.slice(f.length),e.text):"add"==b?g=h+l.indentUnit:"subtract"==b&&(g=h-l.indentUnit);g=Math.max(0,g);if(g-h){h="";i=0;if(l.indentWithTabs)for(e=Math.floor(g/l.tabSize);e;--e)i+=l.tabSize,h+="\t";for(;i<g;)++i,h+=" "}else{if(c.line!=a&&d.line!=a)return;h=f}ba(h,{line:a,ch:0},{line:a,ch:f.length})}function Wb(){F=j.getMode(l,l.mode);s.iter(0,s.size,function(a){a.stateAfter=null});X=[0];kb()}function uc(){if(l.lineWrapping){E.className+=
" CodeMirror-wrap";var a=t.clientWidth/jb()-3;s.iter(0,s.size,function(b){if(!b.hidden){var i=Math.ceil(b.text.length/a)||1;1!=i&&o(b,i)}});A.style.width=L.style.width=""}else E.className=E.className.replace(" CodeMirror-wrap",""),ha=null,ga="",s.iter(0,s.size,function(a){1!=a.height&&!a.hidden&&o(a,1);a.text.length>ga.length&&(ga=a.text)});V.push({from:0,to:s.size})}function Xb(){for(var a='<span class="cm-tab">',b=0;b<l.tabSize;++b)a+=" ";return a+"</span>"}function vc(){rb=Xb();sa(!0)}function Yb(){t.className=
t.className.replace(/\s*cm-s-\w+/g,"")+l.theme.replace(/(^|\s)\s*/g," cm-s-")}function ub(){this.set=[]}function vb(a,b,i){function c(a,k,b,i){n(a).addMark(new z(k,b,i,d.set))}var a=H(a),b=H(b),d=new ub;if(a.line==b.line)c(a.line,a.ch,b.ch,i);else{c(a.line,a.ch,null,i);for(var e=a.line+1,h=b.line;e<h;++e)c(e,null,null,i);c(b.line,null,b.ch,i)}V.push({from:a.line,to:b.line+1});return d}function Zb(a,b){var i=a,c=a;"number"==typeof a?c=n(ab(a)):i=u(a);if(null!=i&&b(c,i))V.push({from:i,to:i+1});else return null;
return c}function $b(a,b){return Zb(a,function(a,k){if(a.hidden!=b){a.hidden=b;o(a,b?0:1);var e=c.line,h=d.line;if(b&&(e==k||h==k))e=e==k?$a({line:e,ch:0},e,0):c,h=h==k?$a({line:h,ch:0},h,0):d,Ia(e,h);return $=!0}})}function qb(a){na.innerHTML="<pre><span>x</span></pre>";na.firstChild.firstChild.firstChild.nodeValue=a;return na.firstChild.firstChild.offsetWidth||10}function ac(a,b){if(0==b)return{top:0,left:0};var c="";l.lineWrapping&&(c=a.text.indexOf(" ",b+2),c=Z(a.text.slice(b+1,0>c?a.text.length:
c+(Ka?5:0))));na.innerHTML="<pre>"+a.getHTML(rb,b)+'<span id="CodeMirror-temp-'+bc+'">'+Z(a.text.charAt(b)||" ")+"</span>"+c+"</pre>";var c=document.getElementById("CodeMirror-temp-"+bc),d=c.offsetTop,e=c.offsetLeft;Ka&&0==d&&0==e&&(d=document.createElement("span"),d.innerHTML="x",c.parentNode.insertBefore(d,c.nextSibling),d=d.offsetTop);return{top:d,left:e}}function Aa(a,b){var c,d=aa(),e=d*(ja(s,a.line)-(b?La:0));if(0==a.ch)c=0;else{var h=ac(n(a.line),a.ch);c=h.left;l.lineWrapping&&(e+=Math.max(0,
h.top))}return{x:c,y:e,yBot:e+d}}function wb(a,b){function c(a){a=ac(j,a);if(o){var b=Math.round(a.top/d);return Math.max(0,a.left+(b-q)*t.clientWidth)}return a.left}0>b&&(b=0);var d=aa(),e=jb(),h=La+Math.floor(b/d),g=f(s,h);if(g>=s.size)return{line:s.size-1,ch:n(s.size-1).text.length};var j=n(g),p=j.text,o=l.lineWrapping,q=o?h-ja(s,g):0;if(0>=a&&0==q)return{line:g,ch:0};for(var m=h=0,p=p.length,u,e=Math.min(p,Math.ceil((a+0.9*q*t.clientWidth)/e));;){var v=c(e);if(v<=a&&e<p)e=Math.min(p,Math.ceil(1.2*
e));else{u=v;p=e;break}}if(a>u)return{line:g,ch:p};e=Math.floor(0.8*p);v=c(e);v<a&&(h=e,m=v);for(;;){if(1>=p-h)return{line:g,ch:u-a>a-m?h:p};e=Math.ceil((h+p)/2);v=c(e);v>a?(p=e,u=v):(h=e,m=v)}}function cc(a){var a=Aa(a,!0),b=ua(A);return{x:b.left+a.x,y:b.top+a.y,yBot:b.top+a.yBot}}function aa(){if(null==va){va="<pre>";for(var a=0;49>a;++a)va+="x<br/>";va+="x</pre>"}a=W.clientHeight;if(a==dc)return xb;dc=a;na.innerHTML=va;xb=na.firstChild.offsetHeight/50||1;na.innerHTML="";return xb}function jb(){if(t.clientWidth==
ec)return fc;ec=t.clientWidth;return fc=qb("x")}function Ba(a,b){var c=ua(t,!0),d,e;try{d=a.clientX,e=a.clientY}catch(h){return null}if(!b&&(d-c.left>t.clientWidth||e-c.top>t.clientHeight))return null;c=ua(A,!0);return wb(d-c.left,e-c.top)}function gc(a){function b(){var a=Ea(B.value).join("\n");a!=h&&w(za)(a,"end");Na.style.position="relative";B.style.cssText=e;Fa=!1;wa(!0);Ua()}var i=Ba(a);if(i&&!window.opera){(I(c,d)||ca(i,c)||!ca(i,d))&&w(ma)(i.line,i.ch);var e=B.style.cssText;Na.style.position=
"absolute";B.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";Fa=!0;var h=B.value=Va();ra();B.select();if(yb){Oa(a);var n=C(window,"mouseup",function(){n();setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Jb(){clearInterval(ib);var a=!0;Y.style.visibility="";ib=setInterval(function(){Y.style.visibility=(a=!a)?
"":"hidden"},650)}function hc(a){function b(a,k,c){if(a.text)for(var i=a.styles,a=g?0:a.text.length-1,d,e=g?0:i.length-2,h=g?i.length:-2;e!=h;e+=2*j){var n=i[e];if(null!=i[e+1]&&i[e+1]!=m)a+=j*n.length;else for(var f=g?0:n.length-1,l=g?n.length:-1;f!=l;f+=j,a+=j)if(a>=k&&a<c&&u.test(d=n.charAt(f))){var xa=zb[d];if(">"==xa.charAt(1)==g)v.push(d);else{if(v.pop()!=xa.charAt(0))return{pos:a,match:!1};if(!v.length)return{pos:a,match:!0}}}}}var i=e?c:d,h=n(i.line),f=i.ch-1,l=0<=f&&zb[h.text.charAt(f)]||
zb[h.text.charAt(++f)];if(l){l.charAt(0);for(var g=">"==l.charAt(1),j=g?1:-1,p=h.styles,q=f+1,l=0,o=p.length;l<o;l+=2)if(0>=(q-=p[l].length)){var m=p[l+1];break}for(var v=[h.text.charAt(f)],u=/[(){}[\]]/,l=i.line,o=g?Math.min(l+100,s.size):Math.max(-1,l-100);l!=o;l+=j){var h=n(l),t=l==i.line;if(t=b(h,t&&g?f+1:0,t&&!g?f:h.text.length))break}t||(t={pos:null,match:!1});var m=t.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",r=vb({line:i.line,ch:f},{line:i.line,ch:f+1},m),P=null!=t.pos&&
vb({line:l,ch:t.pos},{line:l,ch:t.pos+1},m),i=w(function(){r.clear();P&&P.clear()});a?setTimeout(i,800):fa=i}}function ic(a){for(var b,c,d=a,a=a-40;d>a;--d){if(0==d)return 0;var e=n(d-1);if(e.stateAfter)return d;e=e.indentation(l.tabSize);if(null==c||b>e)c=d-1,b=e}return c}function cb(a){var b=ic(a),c=b&&n(b-1).stateAfter,c=c?r(F,c):m(F);s.iter(b,a,function(a){a.highlight(F,c,l.tabSize);a.stateAfter=r(F,c)});b<a&&V.push({from:b,to:a});a<s.size&&!n(a).stateAfter&&X.push(a);return c}function pc(a,b){var c=
cb(a);s.iter(a,b,function(a){a.highlight(F,c,l.tabSize);a.stateAfter=r(F,c)})}function wc(){for(var a=+new Date+l.workTime,b=X.length;X.length;){var c=n(J).stateAfter?X.pop():J;if(!(c>=s.size)){var d=ic(c),e=d&&n(d-1).stateAfter,e=e?r(F,e):m(F),h=0,f=F.compareStates,g=!1,j=d,p=!1;s.iter(j,s.size,function(b){var d=b.stateAfter;if(+new Date>a)return X.push(j),kb(l.workDelay),g&&V.push({from:c,to:j+1}),p=!0;var n=b.highlight(F,e,l.tabSize);n&&(g=!0);b.stateAfter=r(F,e);if(f){if(d&&f(d,e))return!0}else if(!1!==
n||!d)h=0;else if(3<++h&&(!F.indent||F.indent(d,"")==F.indent(e,"")))return!0;++j});if(p)return;g&&V.push({from:c,to:j+1})}}if(b&&l.onHighlightComplete)l.onHighlightComplete(D)}function kb(a){X.length&&xc.set(a,w(wc))}function nb(){ea=Ya=Ha=null;V=[];la=!1;Ga=[]}function ob(){var a=!1,b;la&&(a=!Ca());V.length?b=sa(V,!0):(la&&Tb(),$&&Sb());a&&Ca();la&&(Da(),Jb());T&&!Fa&&(!0===ea||!1!==ea&&la)&&wa(Ya);la&&l.matchBrackets&&setTimeout(w(function(){fa&&(fa(),fa=null);I(c,d)&&hc(!1)}),20);var i=Ha,a=Ga;
if(la&&l.onCursorActivity)l.onCursorActivity(D);if(i&&l.onChange&&D)l.onChange(D,i);for(i=0;i<a.length;++i)a[i](D);if(b&&l.onUpdate)l.onUpdate(D)}function w(a){return function(){jc++||nb();try{var b=a.apply(this,arguments)}finally{--jc||ob()}return b}}var l={},Ab=j.defaults,Pa;for(Pa in Ab)Ab.hasOwnProperty(Pa)&&(l[Pa]=(b&&b.hasOwnProperty(Pa)?b:Ab)[Pa]);var ta=l.document,E=ta.createElement("div");E.className="CodeMirror"+(l.lineWrapping?" CodeMirror-wrap":"");E.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden; outline: 5px auto none"></div><pre class="CodeMirror-cursor">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';
a.appendChild?a.appendChild(E):a(E);var Na=E.firstChild,B=Na.firstChild,t=E.lastChild,L=t.firstChild,Wa=L.firstChild,O=Wa.firstChild,Ma=O.firstChild,A=O.nextSibling.firstChild,na=A.firstChild,Y=na.nextSibling,Xa=Y.nextSibling,W=Xa.nextSibling;Yb();kc&&(B.style.width="0px");Bb||(A.draggable=!0);A.style.outline="none";null!=l.tabindex&&(B.tabIndex=l.tabindex);!l.gutter&&!l.lineNumbers&&(O.style.display="none");try{qb("x")}catch(Cb){throw Cb.message.match(/runtime/i)&&(Cb=Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")),
Cb;}var mb=new Db,xc=new Db,ib,F,s=new v([new q([new p("")])]),X,T;Wb();c={line:0,ch:0};d={line:0,ch:0};e=!1;var S,db,Qa,Eb=0,Fb,pb=!1,Ta=!1,ea,Ya,V,Ha,la,Fa,$,Ga,La=0,J=0,Q=0,Rb=0,fa,ga="",ha,rb=Xb();w(function(){g(l.value||"");ea=!1})();var U=new P;C(t,"mousedown",w(function(a){function b(a){var c=Ba(a,!0);if(c&&!I(c,h)){T||ya();h=c;ka(e,c);ea=!1;var k=Qb();if(c.line>=k.to||c.line<k.from)n=setTimeout(w(function(){b(a)}),150)}}Ub(M(a,"shiftKey"));for(var i=a.target||a.srcElement;i!=E;i=i.parentNode)if(i.parentNode==
L&&i!=Wa)return;for(i=a.target||a.srcElement;i!=E;i=i.parentNode)if(i.parentNode==Ma){if(l.onGutterClick)l.onGutterClick(D,Ra(Ma.childNodes,i)+J,a);return K(a)}var e=Ba(a);switch(yc(a)){case 3:yb&&!Gb&&gc(a);return;case 2:e&&ma(e.line,e.ch,!0);return}if(e){T||ya();i=+new Date;if(Qa&&Qa.time>i-400&&I(Qa.pos,e))return K(a),setTimeout(ra,20),tc(e.line);if(db&&db.time>i-400&&I(db.pos,e))return Qa={time:i,pos:e},K(a),Vb(e);db={time:i,pos:e};var h=e,n;if(lc&&!l.readOnly&&!I(c,d)&&!ca(e,c)&&!ca(d,e)){Bb&&
(A.draggable=!0);var f=C(ta,"mouseup",w(function(b){Bb&&(A.draggable=!1);Fb=!1;f();10>Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)&&(K(b),ma(e.line,e.ch,!0),ra())}),!0);Fb=!0}else{K(a);ma(e.line,e.ch,!0);var g=C(ta,"mousemove",w(function(a){clearTimeout(n);K(a);b(a)}),!0),f=C(ta,"mouseup",w(function(a){clearTimeout(n);var b=Ba(a);b&&ka(e,b);K(a);ra();ea=!0;g();f()}),!0)}}else(a.target||a.srcElement)==t&&K(a)}));C(t,"dblclick",w(function(a){for(var b=a.target||a.srcElement;b!=E;b=b.parentNode)if(b.parentNode==
Ma)return K(a);if(b=Ba(a))Qa={time:+new Date,pos:b},K(a),Vb(b)}));C(A,"dragstart",function(a){var b=Va();Z(b);a.dataTransfer.setDragImage(oa,0,0);a.dataTransfer.setData("Text",b)});C(A,"selectstart",K);yb||C(t,"contextmenu",gc);C(t,"scroll",function(){Eb=t.scrollTop;sa([]);l.fixedGutter&&(O.style.left=t.scrollLeft+"px");if(l.onScroll)l.onScroll(D)});C(window,"resize",function(){sa(!0)});C(B,"keyup",w(function(a){if(!l.onKeyEvent||!l.onKeyEvent(D,Hb(a)))16==M(a,"keyCode")&&(S=null)}));C(B,"input",
Ja);C(B,"keydown",w(function(a){T||ya();Ka&&27==a.keyCode&&(a.returnValue=!1);if(!l.onKeyEvent||!l.onKeyEvent(D,Hb(a))){var b=M(a,"keyCode");Ub(16==b||M(a,"shiftKey"));var c=pa(a);window.opera&&(Ib=c?b:null,!c&&88==b&&M(a,Gb?"metaKey":"ctrlKey")&&za(""))}}));C(B,"keypress",w(function(a){var b=M(a,"keyCode"),c=M(a,"charCode");window.opera&&b==Ib?(Ib=null,K(a)):l.onKeyEvent&&l.onKeyEvent(D,Hb(a))||window.opera&&!a.which&&pa(a)||(l.electricChars&&F.electricChars&&l.smartIndent&&!l.readOnly&&(a=String.fromCharCode(null==
c?b:c),-1<F.electricChars.indexOf(a)&&setTimeout(w(function(){bb(d.line,"smart")}),75)),Ja())}));C(B,"focus",ya);C(B,"blur",hb);C(t,"dragenter",Oa);C(t,"dragover",Oa);C(t,"drop",w(function(a){a.preventDefault();var b=Ba(a,!0),e=a.dataTransfer.files;if(b&&!l.readOnly)if(e&&e.length&&window.FileReader&&window.File)for(var a=function(a,c){var k=new FileReader;k.onload=function(){n[c]=k.result;++f==h&&(b=H(b),w(function(){var a=ba(n.join(""),b,b);ka(b,a)})())};k.readAsText(a)},h=e.length,n=Array(h),f=
0,g=0;g<h;++g)a(e[g],g);else try{if(n=a.dataTransfer.getData("Text"))e=c,a=d,ka(b,b),Fb&&ba("",e,a),za(n),ra()}catch(j){}}));C(t,"paste",function(){ra();Ja()});C(B,"paste",Ja);C(B,"cut",w(function(){l.readOnly||za("")}));var mc;try{mc=ta.activeElement==B}catch(zc){}mc?setTimeout(ya,20):hb();var D=E.CodeMirror={getValue:function(){var a=[];s.iter(0,s.size,function(b){a.push(b.text)});return a.join("\n")},setValue:w(g),getSelection:Va,replaceSelection:w(za),focus:function(){ra();ya();Ja()},setOption:function(a,
b){var c=l[a];l[a]=b;"mode"==a||"indentUnit"==a?Wb():"readOnly"==a&&"nocursor"==b?(hb(),B.blur()):"readOnly"==a&&!b?wa(!0):"theme"==a?Yb():"lineWrapping"==a&&c!=b?w(uc)():"tabSize"==a&&w(vc)();("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a)&&sa(!0)},getOption:function(a){return l[a]},undo:w(function(){Lb(U.done,U.undone,-1)}),redo:w(function(){Lb(U.undone,U.done,1)}),indentLine:w(function(a,b){"string"!=typeof b&&(b=null==b?l.smartIndent?"smart":"prev":b?"add":"subtract");h(a)&&
bb(a,b)}),indentSelection:w(function(a){if(I(c,d))return bb(c.line,a);for(var b=d.line-(d.ch?0:1),e=c.line;e<=b;++e)bb(e,a)}),historySize:function(){return{undo:U.done.length,redo:U.undone.length}},clearHistory:function(){U=new P},matchBrackets:w(function(){hc(!0)}),getTokenAt:w(function(a){a=H(a);return n(a.line).getTokenAt(F,cb(a.line),a.ch)}),getStateAfter:function(a){a=ab(null==a?s.size-1:a);return cb(a+1)},cursorCoords:function(a){null==a&&(a=e);return cc(a?c:d)},charCoords:function(a){return cc(H(a))},
coordsChar:function(a){var b=ua(A);return wb(a.x-b.left,a.y-b.top)},markText:w(vb),setBookmark:function(a){var a=H(a),b=new y(a.ch);n(a.line).addMark(b);return b},setMarker:w(function(a,b,c){"number"==typeof a&&(a=n(ab(a)));a.gutterMarker={text:b,style:c};$=!0;return a}),clearMarker:w(function(a){"number"==typeof a&&(a=n(ab(a)));a.gutterMarker=null;$=!0}),setLineClass:w(function(a,b){return Zb(a,function(a){if(a.className!=b)return a.className=b,!0})}),hideLine:w(function(a){return $b(a,!0)}),showLine:w(function(a){return $b(a,
!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!h(a))return null;a=n(a)}(a.handlers||(a.handlers=[])).push(b);return a},lineInfo:function(a){if("number"==typeof a){if(!h(a))return null;var b=a,a=n(a);if(!a)return null}else if(b=u(a),null==b)return null;var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className}},addWidget:function(a,b,c,d,e){var a=Aa(H(a)),h=a.yBot,n=a.x;b.style.position="absolute";L.appendChild(b);if("over"==
d)h=a.y;else if("near"==d){var d=Math.max(t.offsetHeight,s.height*aa()),f=Math.max(L.clientWidth,A.clientWidth)-A.offsetLeft;a.yBot+b.offsetHeight>d&&a.y>b.offsetHeight&&(h=a.y-b.offsetHeight);n+b.offsetWidth>f&&(n=f-b.offsetWidth)}b.style.top=h+A.offsetTop+"px";b.style.left=b.style.right="";"right"==e?(n=L.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?n=0:"middle"==e&&(n=(L.clientWidth-b.offsetWidth)/2),b.style.left=n+A.offsetLeft+"px");c&&Pb(n,h,n+b.offsetWidth,h+b.offsetHeight)},lineCount:function(){return s.size},
clipPos:H,getCursor:function(a){null==a&&(a=e);return{line:(a?c:d).line,ch:(a?c:d).ch}},somethingSelected:function(){return!I(c,d)},setCursor:w(function(a,b,c){null==b&&"number"==typeof a.line?ma(a.line,a.ch,c):ma(a,b,c)}),setSelection:w(function(a,b,c){(c?ka:Ia)(H(a),H(b||a))}),getLine:function(a){if(h(a))return n(a).text},getLineHandle:function(a){if(h(a))return n(a)},setLine:w(function(a,b){h(a)&&ba(b,{line:a,ch:0},{line:a,ch:n(a).text.length})}),removeLine:w(function(a){h(a)&&ba("",{line:a,ch:0},
H({line:a+1,ch:0}))}),replaceRange:w(ba),getRange:function(a,b){return Nb(H(a),H(b))},execCommand:function(a){return gb[a](D)},moveH:w(function(a,b){var e=0>a?c:d;if(S||I(c,d))e=sb(a,b);ma(e.line,e.ch,!0)}),deleteH:w(function(a,b){I(c,d)?0>a?ba("",sb(a,b),d):ba("",c,sb(a,b)):ba("",c,d);Ya=!0}),moveV:w(function(a,b){var i=0,h=Aa(e?c:d,!0);null!=Za&&(h.x=Za);"page"==b?i=Math.min(t.clientHeight,window.innerHeight||document.documentElement.clientHeight):"line"==b&&(i=aa());i=wb(h.x,h.y+i*a+2);ma(i.line,
i.ch,!0);Za=h.x}),toggleOverwrite:function(){pb=!pb},posFromIndex:function(a){var b=0,c;s.iter(0,s.size,function(d){d=d.text.length+1;if(d>a)return c=a,!0;a-=d;++b});return H({line:b,ch:c})},indexFromPos:function(a){if(0>a.line||0>a.ch)return 0;var b=a.ch;s.iter(0,a.line,function(a){b+=a.text.length+1});return b},scrollTo:function(a,b){null!=a&&(t.scrollTop=a);null!=b&&(t.scrollLeft=b);sa([])},operation:function(a){return w(a)()},refresh:function(){sa(!0);t.scrollHeight>Eb&&(t.scrollTop=Eb)},getInputField:function(){return B},
getWrapperElement:function(){return E},getScrollerElement:function(){return t},getGutterElement:function(){return O}},Ib=null,lb=!1,ia="",Za=null;ub.prototype.clear=w(function(){for(var a=Infinity,b=-Infinity,c=0,d=this.set.length;c<d;++c){var e=this.set[c],h=e.marked;if(h&&e.parent){e=u(e);a=Math.min(a,e);b=Math.max(b,e);for(e=0;e<h.length;++e)h[e].set==this.set&&h.splice(e--,1)}}Infinity!=a&&V.push({from:a,to:b+1})});ub.prototype.find=function(){for(var a,b,c=0,e=this.set.length;c<e;++c)for(var d=
this.set[c],h=d.marked,n=0;n<h.length;++n){var f=h[n];if(f.set==this.set&&(null!=f.from||null!=f.to)){var l=u(d);null!=l&&(null!=f.from&&(a={line:l,ch:f.from}),null!=f.to&&(b={line:l,ch:f.to}))}}return{from:a,to:b}};var bc=Math.floor(16777215*Math.random()).toString(16),xb,dc,va,fc,ec=0,zb={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},jc=0,Sa;for(Sa in eb)eb.propertyIsEnumerable(Sa)&&!D.propertyIsEnumerable(Sa)&&(D[Sa]=eb[Sa]);return D}function x(a,b,c){function d(a,b,c){var f=b[a];if(null!=
f)return f;null==c&&(c=b.fallthrough);if(null==c)return b.catchall;if("string"==typeof c)return d(a,R[c]);for(var b=0,g=c.length;b<g;++b)if(f=d(a,R[c[b]]),null!=f)return f;return null}return b?d(a,b,c):d(a,R[c])}function r(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c}function m(a,b,c){return a.startState?a.startState(b,c):!0}function g(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8}function z(a,
b,c,d){this.from=a;this.to=b;this.style=c;this.set=d}function y(a){this.to=this.from=a;this.line=null}function p(a,b){this.styles=b||[a,null];this.text=a;this.height=1;this.stateAfter=this.parent=this.hidden=this.marked=this.gutterMarker=this.className=this.handlers=null}function o(a,b,c,d){for(var e=0,h=0,n=0;h<b;e+=2){var f=c[e],g=h+f.length;0==n?(g>a&&d.push(f.slice(a-h,Math.min(f.length,b-h)),c[e+1]),g>=a&&(n=1)):1==n&&(g>b?d.push(f.slice(0,b-h),c[e+1]):d.push(f,c[e+1]));h=g}}function q(a){this.lines=
a;this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function v(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var h=a[d],b=b+h.chunkSize(),c=c+h.height;h.parent=this}this.size=b;this.height=c;this.parent=null}function u(a){if(null==a.parent)return null;for(var b=a.parent,a=Ra(b.lines,a),c=b.parent;c;b=c,c=c.parent)for(var d=0;!(c.children[d]==b);++d)a+=c.children[d].chunkSize();return a}function f(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<
e;++d){var h=a.children[d],n=h.height;if(b<n){a=h;continue a}b-=n;c+=h.chunkSize()}return c}while(!a.lines);d=0;for(e=a.lines.length;d<e;++d){h=a.lines[d].height;if(b<h)break;b-=h}return c+d}function ja(a,b){var c=0;a:do{for(var d=0,e=a.children.length;d<e;++d){var h=a.children[d],n=h.chunkSize();if(b<n){a=h;continue a}b-=n;c+=h.height}return c}while(!a.lines);for(d=0;d<b;++d)c+=a.lines[d].height;return c}function P(){this.time=0;this.done=[];this.undone=[]}function pa(){Oa(this)}function Hb(a){a.stop||
(a.stop=pa);return a}function K(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function wa(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Oa(a){K(a);wa(a)}function yc(a){if(a.which)return a.which;if(a.button&1)return 1;if(a.button&2)return 3;if(a.button&4)return 2}function M(a,b){return a.override&&a.override.hasOwnProperty(b)?a.override[b]:a[b]}function C(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,
c,!1)}}else{var e=function(a){c(a||window.event)};a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function Db(){this.id=null}function Ca(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;d<b;++d)"\t"==a.charAt(d)?e+=c-e%c:++e;return e}function ua(a,b){for(var c=a.ownerDocument.body,d=0,e=0,h=!1,n=a;n;n=n.offsetParent){var f=n.offsetLeft,g=n.offsetTop;n==c?(d+=Math.abs(f),e+=Math.abs(g)):(d+=f,e+=g);b&&"fixed"==(n.currentStyle?n.currentStyle:window.getComputedStyle(n,
null)).position&&(h=!0)}c=b&&!h?null:c;for(n=a.parentNode;n!=c;n=n.parentNode)null!=n.scrollLeft&&(d-=n.scrollLeft,e-=n.scrollTop);return{left:d,top:e}}function I(a,b){return a.line==b.line&&a.ch==b.ch}function ca(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Z(a){oa.textContent=a;return oa.innerHTML}function oc(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;0<=c&&0<=d&&!(a.charAt(c)!=b.charAt(d));--c,--d);return d+1}function Ra(a,b){if(a.indexOf)return a.indexOf(b);
for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function tb(a){return/\w/.test(a)||a.toUpperCase()!=a.toLowerCase()}j.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,
onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,document:window.document};var kc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Gb=kc||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var Da={},da={};j.defineMode=function(a,b){!j.defaults.mode&&"null"!=a&&(j.defaults.mode=a);Da[a]=b};j.defineMIME=function(a,b){da[a]=b};j.getMode=function(a,b){"string"==typeof b&&da.hasOwnProperty(b)&&(b=da[b]);if("string"==
typeof b)var c=b,d={};else null!=b&&(c=b.name,d=b);var e=Da[c];return!e?(window.console&&console.warn("No mode "+c+" found, falling back to plain text."),j.getMode(a,"text/plain")):e(a,d||{})};j.listModes=function(){var a=[],b;for(b in Da)Da.propertyIsEnumerable(b)&&a.push(b);return a};j.listMIMEs=function(){var a=[],b;for(b in da)da.propertyIsEnumerable(b)&&a.push({mime:b,mode:da[b]});return a};var eb=j.extensions={};j.defineExtension=function(a,b){eb[a]=b};var gb=j.commands={selectAll:function(a){a.setSelection({line:0,
ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!I(b,c);!d&&a.getLine(b.line).length==b.ch?a.replaceRange("",b,{line:b.line+1,ch:0}):a.replaceRange("",b,d?c:{line:b.line})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,
0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),c=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=c&&b.ch?0:c,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,
"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t",
"end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);0<b.ch&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end");a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},R=j.keyMap={};R.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",
Delete:"delCharRight",Backspace:"delCharLeft",Tab:"indentMore","Shift-Tab":"indentLess",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};R.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight",
"Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll",fallthrough:"basic"};R.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight",
"Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll",fallthrough:["basic","emacsy"]};R["default"]=Gb?R.macDefault:R.pcDefault;R.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight",
"Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};j.fromTextArea=function(a,b){function c(){a.value=f.getValue()}b||(b={});b.value=a.value;!b.tabindex&&a.tabindex&&(b.tabindex=a.tabindex);if(a.form){var d=C(a.form,"submit",c,!0);if("function"==typeof a.form.submit){var e=a.form.submit,h=function(){c();a.form.submit=e;a.form.submit();a.form.submit=h};a.form.submit=h}}a.style.display="none";var f=j(function(b){a.parentNode.insertBefore(b,a.nextSibling)},b);f.save=c;f.getTextArea=
function(){return a};f.toTextArea=function(){c();a.parentNode.removeChild(f.getWrapperElement());a.style.display="";a.form&&(d(),"function"==typeof a.form.submit&&(a.form.submit=e))};return f};j.copyState=r;j.startState=m;g.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){return Ca(this.string,this.start,this.tabSize)},indentation:function(){return Ca(this.string,
null,this.tabSize)},match:function(a,b,c){if("string"==typeof a){if((c?this.string.toLowerCase():this.string).indexOf(c?a.toLowerCase():a,this.pos)==this.pos)return!1!==b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&!1!==b)this.pos+=a[0].length;return a}},current:function(){return this.string.slice(this.start,this.pos)}};j.StringStream=g;z.prototype={attach:function(a){this.set.push(a)},detach:function(a){a=Ra(this.set,a);-1<a&&this.set.splice(a,1)},split:function(a,
b){return this.to<=a&&null!=this.to?null:new z(this.from<a||null==this.from?null:this.from-a+b,null==this.to?null:this.to-a+b,this.style,this.set)},dup:function(){return new z(null,null,this.style,this.set)},clipTo:function(a,b,c,d,e){null!=this.from&&this.from>=b&&(this.from=Math.max(d,this.from)+e);null!=this.to&&this.to>b&&(this.to=d<this.to?this.to+e:b);if(a&&d>this.from&&(d<this.to||null==this.to))this.from=null;if(c&&(b<this.to||null==this.to)&&(b>this.from||null==this.from))this.to=null},isDead:function(){return null!=
this.from&&null!=this.to&&this.from>=this.to},sameSet:function(a){return this.set==a.set}};y.prototype={attach:function(a){this.line=a},detach:function(a){this.line==a&&(this.line=null)},split:function(a,b){if(a<this.from)return this.from=this.to=this.from-a+b,this},isDead:function(){return this.from>this.to},clipTo:function(a,b,c,d,e){(a||b<this.from)&&(c||d>this.to)?(this.from=0,this.to=-1):this.from>b&&(this.from=this.to=Math.max(d,this.from)+e)},sameSet:function(){return!1},find:function(){return!this.line||
!this.line.parent?null:{line:u(this.line),ch:this.from}},clear:function(){if(this.line){var a=Ra(this.line.marked,this);-1!=a&&this.line.marked.splice(a,1);this.line=null}}};p.inheritMarks=function(a,b){var c=new p(a),d=b&&b.marked;if(d)for(var e=0;e<d.length;++e)if(null==d[e].to&&d[e].style){var h=c.marked||(c.marked=[]),f=d[e].dup();h.push(f);f.attach(c)}return c};p.prototype={replace:function(a,b,c){var d=[],e=this.marked,h=null==b?this.text.length:b;o(0,a,this.styles,d);c&&d.push(c,null);o(h,
this.text.length,this.styles,d);this.styles=d;this.text=this.text.slice(0,a)+c+this.text.slice(h);this.stateAfter=null;if(e){c=c.length-(h-a);for(d=0;d<e.length;++d){var f=e[d];f.clipTo(null==a,a||0,null==b,h,c);f.isDead()&&(f.detach(this),e.splice(d--,1))}}},split:function(a,b){var c=[b,null],d=this.marked;o(a,this.text.length,this.styles,c);c=new p(b+this.text.slice(a),c);if(d)for(var e=0;e<d.length;++e){var h=d[e].split(a,b.length);h&&(c.marked||(c.marked=[]),c.marked.push(h),h.attach(c))}return c},
append:function(a){var b=this.text.length,c=a.marked,d=this.marked;this.text+=a.text;o(0,a.text.length,a.styles,this.styles);if(d)for(a=0;a<d.length;++a)null==d[a].to&&(d[a].to=b);if(c&&c.length){d||(this.marked=d=[]);a=0;a:for(;a<c.length;++a){var e=c[a];if(!e.from)for(var h=0;h<d.length;++h){var f=d[h];if(f.to==b&&f.sameSet(e)){f.to=null==e.to?null:e.to+b;f.isDead()&&(f.detach(this),c.splice(a--,1));continue a}}d.push(e);e.attach(this);e.from+=b;null!=e.to&&(e.to+=b)}}},fixMarkEnds:function(a){var b=
this.marked,a=a.marked;if(b)for(var c=0;c<b.length;++c){var d=b[c],e=null==d.to;if(e&&a)for(var h=0;h<a.length;++h)if(a[h].sameSet(d)){e=!1;break}e&&(d.to=this.text.length)}},fixMarkStarts:function(){var a=this.marked;if(a)for(var b=0;b<a.length;++b)null==a[b].from&&(a[b].from=0)},addMark:function(a){a.attach(this);null==this.marked&&(this.marked=[]);this.marked.push(a);this.marked.sort(function(a,c){return(a.from||0)-(c.from||0)})},highlight:function(a,b,c){var c=new g(this.text,c),d=this.styles,
e=0,h=!1,f=d[0],j;for(""==this.text&&a.blankLine&&a.blankLine(b);!c.eol();){var p=a.token(c,b),o=this.text.slice(c.start,c.pos);c.start=c.pos;if(e&&d[e-1]==p)d[e-2]+=o;else if(o){if(!h&&(d[e+1]!=p||e&&d[e-2]!=j))h=!0;d[e++]=o;d[e++]=p;j=f;f=d[e]}if(5E3<c.pos){d[e++]=this.text.slice(c.pos);d[e++]=null;break}}d.length!=e&&(d.length=e,h=!0);e&&d[e-2]!=j&&(h=!0);return h||(5>d.length&&10>this.text.length?null:!1)},getTokenAt:function(a,b,c){for(var d=new g(this.text);d.pos<c&&!d.eol();){d.start=d.pos;
var e=a.token(d,b)}return{start:d.start,end:d.pos,string:d.current(),className:e||null,state:b}},indentation:function(a){return Ca(this.text,null,a)},getHTML:function(a,b){function c(b,c){b&&(h&&Ka&&" "==b.charAt(0)&&(b="\u00a0"+b.slice(1)),h=!1,c?e.push('<span class="',c,'">',Z(b).replace(/\t/g,a),"</span>"):e.push(Z(b).replace(/\t/g,a)))}function d(a){return!a?null:"cm-"+a.replace(/ +/g," cm-")}var e=[],h=!0,f=this.styles,g=this.text,j=this.marked,p=g.length;null!=b&&(p=Math.min(b,p));if(!g&&null==
b)c(" ");else if(!j||!j.length)for(var o=g=0;o<p;g+=2){var q=f[g],m=f[g+1],v=q.length;o+v>p&&(q=q.slice(0,p-o));o+=v;c(q,d(m))}else for(var u=0,g=0,o="",r=j[0].from||0,P=[],y=0,q=function(){for(var a;y<j.length&&((a=j[y]).from==u||null==a.from);)null!=a.style&&P.push(a),++y;r=y<j.length?j[y].from:Infinity;for(a=0;a<P.length;++a){var b=P[a].to||Infinity;b==u?P.splice(a--,1):r=Math.min(b,r)}};u<p;){r==u&&q();for(v=Math.min(p,r);;){if(o){for(var x=u+o.length,ja=m,pa=0;pa<P.length;++pa)ja=(ja?ja+" ":
"")+P[pa].style;c(x>v?o.slice(0,v-u):o,ja);if(x>=v){o=o.slice(v-u);u=v;break}u=x}o=f[g++];m=d(f[g++])}}return e.join("")},cleanUp:function(){this.parent=null;if(this.marked)for(var a=0,b=this.marked.length;a<b;++a)this.marked[a].detach(this)}};q.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;d<e;++d){var h=this.lines[d];this.height-=h.height;h.cleanUp();if(h.handlers)for(var f=0;f<h.handlers.length;++f)c.push(h.handlers[f])}this.lines.splice(a,b)},
collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c;this.lines.splice.apply(this.lines,[a,0].concat(b));a=0;for(c=b.length;a<c;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};v.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],h=e.chunkSize();if(a<h){var f=Math.min(b,h-a),g=e.height;e.remove(a,
f,c);this.height-=g-e.height;h==f&&(this.children.splice(d--,1),e.parent=null);if(0==(b-=f))break;a=0}else a-=h}25>this.size-b&&(a=[],this.collapse(a),this.children=[new q(a)],this.children[0].parent=this)},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var h=
this.children[d],f=h.chunkSize();if(a<=f){h.insertHeight(a,b,c);if(h.lines&&50<h.lines.length){for(;50<h.lines.length;)a=h.lines.splice(h.lines.length-25,25),a=new q(a),h.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new v(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=Ra(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=
new v(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var h=this.children[d],f=h.chunkSize();if(a<f){f=Math.min(b,f-a);if(h.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};P.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=this.done[this.done.length-1],h=e&&e[e.length-1];if(400<d-this.time||
!h)this.done.push([{start:a,added:b,old:c}]);else if(h.start>a+b||h.start+h.added<a-h.added+h.old.length)e.push({start:a,added:b,old:c});else{var f=0;if(a<h.start){for(e=h.start-a-1;0<=e;--e)h.old.unshift(c[e]);h.added+=h.start-a;h.start=a}else h.start<a&&(f=a-h.start,b+=f);e=h.added-f;for(a=c.length;e<a;++e)h.old.push(c[e]);h.added<b&&(h.added=b)}this.time=d}};j.e_stop=Oa;j.e_preventDefault=K;j.e_stopPropagation=wa;j.connect=C;Db.prototype={set:function(a,b){clearTimeout(this.id);this.id=setTimeout(b,
a)}};var lc;lc=/MSIE [1-8]\b/.test(navigator.userAgent)?!1:"draggable"in document.createElement("div");var yb=/gecko\/\d{7}/i.test(navigator.userAgent),Ka=/MSIE \d/.test(navigator.userAgent),Bb=/WebKit\//.test(navigator.userAgent);(function(){var a=document.createElement("textarea");a.value="foo\nbar";a.value.indexOf("\r")})();null!=document.documentElement.getBoundingClientRect&&(ua=function(a,b){try{var c=a.getBoundingClientRect(),c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==
window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body);c.top+=e.scrollTop;c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c});var oa=document.createElement("pre");"\na"==Z("a")?Z=function(a){oa.textContent=a;return oa.innerHTML.slice(1)}:"\t"!=Z("\t")&&(Z=function(a){oa.innerHTML="";oa.appendChild(document.createTextNode(a));return oa.innerHTML});j.htmlEscape=Z;var Ea=3!="\n\nb".split(/\n/).length?function(a){for(var b=
0,c,d=[];-1<(c=a.indexOf("\n",b));)d.push(a.slice(b,"\r"==a.charAt(c-1)?c-1:c)),b=c+1;d.push(a.slice(b));return d}:function(a){return a.split(/\r?\n/)};j.splitLines=Ea;var qc=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return!b||b.parentElement()!=a?!1:0!=b.compareEndPoints("StartToEnd",b)};j.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});j.defineMIME("text/plain",
"null");var qa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",
63272:"Delete"};j.keyNames=qa;(function(){for(var a=0;10>a;a++)qa[a+48]=""+a;for(a=65;90>=a;a++)qa[a]=String.fromCharCode(a);for(a=1;12>=a;a++)qa[a+111]=qa[a+63235]="F"+a})();return j}();(function(){function j(j,r){var m=j.getWrapperElement(),m=m.insertBefore(document.createElement("div"),m.firstChild);m.className="CodeMirror-dialog";m.innerHTML="<div>"+r+"</div>";return m}CodeMirror.defineExtension("openDialog",function(x,r){function m(){z||(z=!0,g.parentNode.removeChild(g))}var g=j(this,x),z=!1,y=this,p=g.getElementsByTagName("input")[0];p&&(CodeMirror.connect(p,"keydown",function(g){if(13==g.keyCode||27==g.keyCode)CodeMirror.e_stop(g),m(),y.focus(),13==g.keyCode&&r(p.value)}),
p.focus(),CodeMirror.connect(p,"blur",m));return m});CodeMirror.defineExtension("openConfirm",function(x,r){function m(){y||(y=!0,g.parentNode.removeChild(g),p.focus())}var g=j(this,x),z=g.getElementsByTagName("button"),y=!1,p=this,o=1;z[0].focus();for(var q=0;q<z.length;++q){var v=z[q];(function(g){CodeMirror.connect(v,"click",function(f){CodeMirror.e_preventDefault(f);m();g&&g(p)})})(r[q]);CodeMirror.connect(v,"blur",function(){--o;setTimeout(function(){0>=o&&m()},200)});CodeMirror.connect(v,"focus",
function(){++o})}})})();(function(){function j(j,r,m,g){this.atOccurrence=!1;this.cm=j;null==g&&(g="string"==typeof r&&r==r.toLowerCase());m=m?j.clipPos(m):{line:0,ch:0};this.pos={from:m,to:m};if("string"!=typeof r)this.matches=function(g,o){if(g)for(var q=j.getLine(o.line).slice(0,o.ch),m=q.match(r),u=0;m;){var f=q.indexOf(m[0]),u=u+f,q=q.slice(f+1);if(f=q.match(r))m=f;else break;u++}else q=j.getLine(o.line).slice(o.ch),u=(m=q.match(r))&&o.ch+q.indexOf(m[0]);if(m)return{from:{line:o.line,ch:u},to:{line:o.line,ch:u+m[0].length},
match:m}};else{g&&(r=r.toLowerCase());var z=g?function(g){return g.toLowerCase()}:function(g){return g},y=r.split("\n");this.matches=1==y.length?function(g,o){var q=z(j.getLine(o.line)),m=r.length,u;if(g?o.ch>=m&&-1!=(u=q.lastIndexOf(r,o.ch-m)):-1!=(u=q.indexOf(r,o.ch)))return{from:{line:o.line,ch:u},to:{line:o.line,ch:u+m}}}:function(g,o){var m=o.line,v=g?y.length-1:0,u=y[v],f=z(j.getLine(m)),r=g?f.indexOf(u)+u.length:f.lastIndexOf(u);if(!(g?r>=o.ch||r!=u.length:r<=o.ch||r!=f.length-u.length))for(;!(g?
!m:m==j.lineCount()-1);){f=z(j.getLine(m+=g?-1:1));u=y[g?--v:++v];if(0<v&&v<y.length-1)if(f!=u)break;else continue;v=g?f.lastIndexOf(u):f.indexOf(u)+u.length;if(g?v!=f.length-u.length:v!=u.length)break;u={line:o.line,ch:r};m={line:m,ch:v};return{from:g?m:u,to:g?u:m}}}}}j.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(j){function r(g){g={line:g,ch:0};m.pos={from:g,to:g};return m.atOccurrence=!1}for(var m=this,g=this.cm.clipPos(j?this.pos.from:
this.pos.to);;){if(this.pos=this.matches(j,g))return this.atOccurrence=!0,this.pos.match||!0;if(j){if(!g.line)return r(0);g={line:g.line-1,ch:this.cm.getLine(g.line-1).length}}else{var z=this.cm.lineCount();if(g.line==z-1)return r(z);g={line:g.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(j){this.atOccurrence&&(this.pos.to=this.cm.replaceRange(j,this.pos.from,this.pos.to))}};CodeMirror.defineExtension("getSearchCursor",
function(x,r,m){return new j(this,x,r,m)})})();(function(){function j(){this.posFrom=this.posTo=this.query=null;this.marked=[]}function x(f,g,j,m){f.openDialog?f.openDialog(g,m):m(prompt(j,""))}function r(f,g,j,m){if(f.openConfirm)f.openConfirm(g,m);else if(confirm(j))m[0]()}function m(f){var g=f.match(/^\/(.*)\/$/);return g?RegExp(g[1]):f}function g(f,g){var p=f._searchState||(f._searchState=new j);if(p.query)return z(f,g);x(f,o,"Search for:",function(j){f.operation(function(){if(j&&!p.query){p.query=m(j);if(2E3>f.lineCount())for(var o=f.getSearchCursor(j);o.findNext();)p.marked.push(f.markText(o.from(),
o.to(),"CodeMirror-searching"));p.posFrom=p.posTo=f.getCursor();z(f,g)}})})}function z(f,g){f.operation(function(){var m=f._searchState||(f._searchState=new j),o=f.getSearchCursor(m.query,g?m.posFrom:m.posTo);if(!o.find(g)&&(o=f.getSearchCursor(m.query,g?{line:f.lineCount()-1}:{line:0,ch:0}),!o.find(g)))return;f.setSelection(o.from(),o.to());m.posFrom=o.from();m.posTo=o.to()})}function y(f){f.operation(function(){var g=f._searchState||(f._searchState=new j);if(g.query){g.query=null;for(var m=0;m<
g.marked.length;++m)g.marked[m].clear();g.marked.length=0}})}function p(f,g){x(f,q,"Replace:",function(j){j&&(j=m(j),x(f,v,"Replace with:",function(m){if(g)f.operation(function(){for(var g=f.getSearchCursor(j);g.findNext();)if("string"!=typeof j){var o=f.getRange(g.from(),g.to()).match(j);g.replace(m.replace(/\$(\d)/,function(f,g){return o[g]}))}else g.replace(m)});else{y(f);var o=f.getSearchCursor(j,f.getCursor()),p=function(){var g=o.from(),m;if(!(m=o.findNext()))if(o=f.getSearchCursor(j),!(m=o.findNext())||
o.from().line==g.line&&o.from().ch==g.ch)return;f.setSelection(o.from(),o.to());r(f,u,"Replace?",[function(){q(m)},p])},q=function(f){o.replace("string"==typeof j?m:m.replace(/\$(\d)/,function(g,j){return f[j]}));p()};p()}}))})}var o='Search: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',q='Replace: <input type="text" style="width: 10em"> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',v='With: <input type="text" style="width: 10em">',
u="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(f){y(f);g(f)};CodeMirror.commands.findNext=g;CodeMirror.commands.findPrev=function(f){g(f,!0)};CodeMirror.commands.clearSearch=y;CodeMirror.commands.replace=p;CodeMirror.commands.replaceAll=function(f){p(f,!0)}})();(function(){CodeMirror.simpleHint=function(j,x){function r(){q||(q=!0,y.parentNode.removeChild(y))}function m(){j.replaceRange(z[p.selectedIndex],g.from,g.to);r();setTimeout(function(){j.focus()},50)}if(!j.somethingSelected()){var g=x(j);if(g&&g.list.length){var z=g.list;if(1==z.length)return j.replaceRange(z[0],g.from,g.to),!0;var y=document.createElement("div");y.className="CodeMirror-completions";var p=y.appendChild(document.createElement("select"));window.opera||(p.multiple=!0);for(var o=0;o<
z.length;++o)p.appendChild(document.createElement("option")).appendChild(document.createTextNode(z[o]));p.firstChild.selected=!0;p.size=Math.min(10,z.length);o=j.cursorCoords();y.style.left=o.x+"px";y.style.top=o.yBot+"px";document.body.appendChild(y);10>=z.length&&(y.style.width=p.clientWidth-1+"px");var q=!1;CodeMirror.connect(p,"blur",r);CodeMirror.connect(p,"keydown",function(g){var o=g.keyCode;13==o?(CodeMirror.e_stop(g),m()):27==o?(CodeMirror.e_stop(g),r(),j.focus()):38!=o&&40!=o&&(r(),j.focus(),
setTimeout(function(){CodeMirror.simpleHint(j,x)},50))});CodeMirror.connect(p,"dblclick",m);p.focus();window.opera&&setTimeout(function(){q||p.focus()},100);return!0}}}})();(function(){function j(g,j){for(var m=0,q=g.length;m<q;++m)j(g[m])}function x(y,p){function o(g){var f;if(f=0==g.indexOf(u)){a:if(Array.prototype.indexOf)f=-1!=v.indexOf(g);else{for(f=v.length;f--;)if(v[f]===g){f=!0;break a}f=!1}f=!f}f&&v.push(g)}function q(f){"string"==typeof f?j(r,o):f instanceof Array?j(m,o):f instanceof Function&&j(g,o);for(var p in f)o(p)}var v=[],u=y.string;if(p){var f=p.pop(),x;for("variable"==f.className?x=window[f.string]:"string"==f.className?x="":"atom"==f.className&&(x=
1);null!=x&&p.length;)x=x[p.pop().string];null!=x&&q(x)}else{for(f=y.state.localVars;f;f=f.next)o(f.name);q(window);j(z,o)}return v}CodeMirror.javascriptHint=function(g){var j=g.getCursor(),m=g.getTokenAt(j),q=m;for(/^[\w$_]*$/.test(m.string)||(m=q={start:j.ch,end:j.ch,string:"",state:m.state,className:"."==m.string?"property":null});"property"==q.className;){q=g.getTokenAt({line:j.line,ch:q.start});if("."!=q.string)return;q=g.getTokenAt({line:j.line,ch:q.start});if(!r)var r=[];r.push(q)}return{list:x(m,
r),from:{line:j.line,ch:m.start},to:{line:j.line,ch:m.end}}};var r="charAt,charCodeAt,indexOf,lastIndexOf,substring,substr,slice,trim,trimLeft,trimRight,toUpperCase,toLowerCase,split,concat,match,replace,search".split(","),m="length,concat,join,splice,push,pop,shift,unshift,slice,reverse,sort,indexOf,lastIndexOf,every,some,filter,forEach,map,reduce,reduceRight".split(","),g=["prototype","apply","call","bind"],z="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,throw,true,try,typeof,var,void,while,with".split(",")})();CodeMirror.overlayParser=function(j,x,r){return{startState:function(){return{base:CodeMirror.startState(j),overlay:CodeMirror.startState(x),basePos:0,baseCur:null,overlayPos:0,overlayCur:null}},copyState:function(m){return{base:CodeMirror.copyState(j,m.base),overlay:CodeMirror.copyState(x,m.overlay),basePos:m.basePos,baseCur:null,overlayPos:m.overlayPos,overlayCur:null}},token:function(m,g){m.start==g.basePos&&(g.baseCur=j.token(m,g.base),g.basePos=m.pos);m.start==g.overlayPos&&(m.pos=m.start,g.overlayCur=
x.token(m,g.overlay),g.overlayPos=m.pos);m.pos=Math.min(g.basePos,g.overlayPos);m.eol()&&(g.basePos=g.overlayPos=0);return null==g.overlayCur?g.baseCur:null!=g.baseCur&&r?g.baseCur+" "+g.overlayCur:g.overlayCur},indent:function(m,g){return j.indent(m.base,g)},electricChars:j.electricChars}};CodeMirror.runMode=function(j,x,r){var x=CodeMirror.getMode({indentUnit:2},x),m=1==r.nodeType;if(m)var g=r,z=[],r=function(g,f){"\n"==g?z.push("<br>"):f?z.push('<span class="cm-'+CodeMirror.htmlEscape(f)+'">'+CodeMirror.htmlEscape(g)+"</span>"):z.push(CodeMirror.htmlEscape(g))};for(var j=CodeMirror.splitLines(j),y=CodeMirror.startState(x),p=0,o=j.length;p<o;++p){p&&r("\n");for(var q=new CodeMirror.StringStream(j[p]);!q.eol();){var v=x.token(q,y);r(q.current(),v,p,q.start);q.start=q.pos}}m&&(g.innerHTML=
z.join(""))};
